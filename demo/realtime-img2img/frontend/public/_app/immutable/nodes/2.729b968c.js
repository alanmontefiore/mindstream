import{f as Et,s as K,c as Vt,u as $t,g as Ht,d as Ut,h as zt,n as z,e as ue,b as te,i as Ue,o as ye,j as kt,r as wt,k as jt,l as se}from"../chunks/scheduler.d303939e.js";import{S as Z,i as ee,g as I,h as R,j as T,f as P,k as v,a as N,y as ie,d as D,t as M,z as Le,A as Ie,x as E,p as me,b as de,s as H,r as j,c as U,u as q,v as X,w as J,B as be,C as ze,D as qe,m as W,n as Y,E as ae,o as ge,F as Lt,G as Ne,e as re,H as oe,l as qt,I as Xt,J as Jt,K as Wt}from"../chunks/index.c3a2e323.js";import{w as Pe,d as Yt}from"../chunks/index.57cd3851.js";function ve(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}const Qt=!0,fi=Object.freeze(Object.defineProperty({__proto__:null,prerender:Qt},Symbol.toStringTag,{value:"Module"}));var le=(i=>(i.RANGE="range",i.SEED="seed",i.TEXTAREA="textarea",i.CHECKBOX="checkbox",i.SELECT="select",i))(le||{}),It=(i=>(i.IMAGE="image",i.VIDEO="video",i.TEXT="text",i))(It||{}),je=(i=>(i.CONNECTED="connected",i.DISCONNECTED="disconnected",i.WAIT="wait",i.SEND_FRAME="send_frame",i.TIMEOUT="timeout",i))(je||{});const Kt="disconnected",fe=Pe(Kt),ke=Pe(null);let Q=null;const lt={async start(i){return new Promise((e,t)=>{try{const a=crypto.randomUUID(),r=`${window.location.protocol==="https:"?"wss":"ws"}:${window.location.host}/api/ws/${a}`;Q=new WebSocket(r),Q.onopen=()=>{console.log("Connected to websocket")},Q.onclose=()=>{fe.set("disconnected"),console.log("Disconnected from websocket")},Q.onerror=s=>{console.error(s)},Q.onmessage=s=>{const n=JSON.parse(s.data);switch(n.status){case"connected":fe.set("connected"),ke.set(a),e({status:"connected",userId:a});break;case"send_frame":fe.set("send_frame");const o=i();Q==null||Q.send(JSON.stringify({status:"next_frame"}));for(const l of o)this.send(l);break;case"wait":fe.set("wait");break;case"timeout":console.log("timeout"),fe.set("timeout"),ke.set(null),t(new Error("timeout"));break;case"error":console.log(n.message),fe.set("disconnected"),ke.set(null),t(new Error(n.message));break}}}catch(a){console.error(a),fe.set("disconnected"),ke.set(null),t(a)}})},send(i){Q&&Q.readyState===WebSocket.OPEN?i instanceof Blob?Q.send(i):Q.send(JSON.stringify(i)):console.log("WebSocket not connected")},async stop(){fe.set("disconnected"),Q&&Q.close(),Q=null,ke.set(null)}},ne=Pe({}),Zt=Yt(ne,(i,e)=>{const t=setTimeout(()=>{e(i)},100);return()=>clearTimeout(t)}),Oe=()=>Et(ne);function en(i){let e,t,a,r,s;const n=i[4].default,o=Vt(n,i,i[3],null);return{c(){e=I("button"),o&&o.c(),this.h()},l(l){e=R(l,"BUTTON",{class:!0,title:!0});var c=T(e);o&&o.l(c),c.forEach(P),this.h()},h(){v(e,"class",t="button "+i[0]+" svelte-1eet948"),e.disabled=i[1],v(e,"title",i[2])},m(l,c){N(l,e,c),o&&o.m(e,null),a=!0,r||(s=ie(e,"click",i[5]),r=!0)},p(l,[c]){o&&o.p&&(!a||c&8)&&$t(o,n,l,l[3],a?Ut(n,l[3],c,null):Ht(l[3]),null),(!a||c&1&&t!==(t="button "+l[0]+" svelte-1eet948"))&&v(e,"class",t),(!a||c&2)&&(e.disabled=l[1]),(!a||c&4)&&v(e,"title",l[2])},i(l){a||(D(o,l),a=!0)},o(l){M(o,l),a=!1},d(l){l&&P(e),o&&o.d(l),r=!1,s()}}}function tn(i,e,t){let{$$slots:a={},$$scope:r}=e,{classList:s="p-2"}=e,{disabled:n=!1}=e,{title:o=""}=e;function l(c){zt.call(this,i,c)}return i.$$set=c=>{"classList"in c&&t(0,s=c.classList),"disabled"in c&&t(1,n=c.disabled),"title"in c&&t(2,o=c.title),"$$scope"in c&&t(3,r=c.$$scope)},[s,n,o,r,a,l]}class Ke extends Z{constructor(e){super(),ee(this,e,tn,en,K,{classList:0,disabled:1,title:2})}}function nn(i){let e,t;return{c(){e=Le("svg"),t=Le("path"),this.h()},l(a){e=Ie(a,"svg",{xmlns:!0,height:!0,viewBox:!0,class:!0});var r=T(e);t=Ie(r,"path",{fill:!0,d:!0}),T(t).forEach(P),r.forEach(P),this.h()},h(){v(t,"fill","currentColor"),v(t,"d","M48 96v320a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V170.5a16 16 0 0 0-4.7-11.3l33.9-33.9a64 64 0 0 1 18.7 45.3V416a64 64 0 0 1-64 64H64a64 64 0 0 1-64-64V96a64 64 0 0 1 64-64h245.5a64 64 0 0 1 45.3 18.7l74.5 74.5-33.9 33.9-74.6-74.4-.8-.8V184a24 24 0 0 1-24 24H104a24 24 0 0 1-24-24V80H64a16 16 0 0 0-16 16zm80-16v80h144V80H128zm32 240a64 64 0 1 1 128 0 64 64 0 1 1-128 0z"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"height","1em"),v(e,"viewBox","0 0 448 512"),v(e,"class",i[0])},m(a,r){N(a,e,r),E(e,t)},p(a,[r]){r&1&&v(e,"class",a[0])},i:z,o:z,d(a){a&&P(e)}}}function an(i,e,t){let{classList:a}=e;return i.$$set=r=>{"classList"in r&&t(0,a=r.classList)},[a]}class rn extends Z{constructor(e){super(),ee(this,e,an,nn,K,{classList:0})}}var Qe={exports:{}};(function(i,e){(function(){var t={};t.version="1.0.4",t.remove=function(m){var f=!1;if(m.slice(0,2)!="ÿØ")if(m.slice(0,23)=="data:image/jpeg;base64,"||m.slice(0,22)=="data:image/jpg;base64,")m=p(m.split(",")[1]),f=!0;else throw new Error("Given data is not jpeg.");var d=O(m),y=d.filter(function(g){return!(g.slice(0,2)=="ÿá"&&g.slice(4,10)=="Exif\0\0")}),S=y.join("");return f&&(S="data:image/jpeg;base64,"+_(S)),S},t.insert=function(m,f){var d=!1;if(m.slice(0,6)!="Exif\0\0")throw new Error("Given data is not exif.");if(f.slice(0,2)!="ÿØ")if(f.slice(0,23)=="data:image/jpeg;base64,"||f.slice(0,22)=="data:image/jpg;base64,")f=p(f.split(",")[1]),d=!0;else throw new Error("Given data is not jpeg.");var y="ÿá"+u(">H",[m.length+2])+m,S=O(f),g=L(S,y);return d&&(g="data:image/jpeg;base64,"+_(g)),g},t.load=function(m){var f;if(typeof m=="string")if(m.slice(0,2)=="ÿØ")f=m;else if(m.slice(0,23)=="data:image/jpeg;base64,"||m.slice(0,22)=="data:image/jpg;base64,")f=p(m.split(",")[1]);else if(m.slice(0,4)=="Exif")f=m.slice(6);else throw new Error("'load' gots invalid file data.");else throw new Error("'load' gots invalid type argument.");var d={"0th":{},Exif:{},GPS:{},Interop:{},"1st":{},thumbnail:null},y=new b(f);if(y.tiftag===null)return d;y.tiftag.slice(0,2)=="II"?y.endian_mark="<":y.endian_mark=">";var S=h(y.endian_mark+"L",y.tiftag.slice(4,8))[0];d["0th"]=y.get_ifd(S,"0th");var g=d["0th"].first_ifd_pointer;if(delete d["0th"].first_ifd_pointer,34665 in d["0th"]&&(S=d["0th"][34665],d.Exif=y.get_ifd(S,"Exif")),34853 in d["0th"]&&(S=d["0th"][34853],d.GPS=y.get_ifd(S,"GPS")),40965 in d.Exif&&(S=d.Exif[40965],d.Interop=y.get_ifd(S,"Interop")),g!="\0\0\0\0"&&(S=h(y.endian_mark+"L",g)[0],d["1st"]=y.get_ifd(S,"1st"),513 in d["1st"]&&514 in d["1st"])){var k=d["1st"][513]+d["1st"][514],B=y.tiftag.slice(d["1st"][513],k);d.thumbnail=B}return d},t.dump=function(m){var f=8,d=a(m),y="Exif\0\0MM\0*\0\0\0\b",S=!1,g=!1,k=!1,B=!1,x,G,$,V,Re;"0th"in d?x=d["0th"]:x={},"Exif"in d&&Object.keys(d.Exif).length||"Interop"in d&&Object.keys(d.Interop).length?(x[34665]=1,S=!0,G=d.Exif,"Interop"in d&&Object.keys(d.Interop).length?(G[40965]=1,k=!0,$=d.Interop):Object.keys(G).indexOf(t.ExifIFD.InteroperabilityTag.toString())>-1&&delete G[40965]):Object.keys(x).indexOf(t.ImageIFD.ExifTag.toString())>-1&&delete x[34665],"GPS"in d&&Object.keys(d.GPS).length?(x[t.ImageIFD.GPSTag]=1,g=!0,V=d.GPS):Object.keys(x).indexOf(t.ImageIFD.GPSTag.toString())>-1&&delete x[t.ImageIFD.GPSTag],"1st"in d&&"thumbnail"in d&&d.thumbnail!=null&&(B=!0,d["1st"][513]=1,d["1st"][514]=1,Re=d["1st"]);var Ce=c(x,"0th",0),ce=Ce[0].length+S*12+g*12+4+Ce[1].length,pe,Ve="",he=0,$e,Xe="",Ae=0,et,Je="",We=0,De,tt="",He;if(S&&(pe=c(G,"Exif",ce),he=pe[0].length+k*12+pe[1].length),g&&($e=c(V,"GPS",ce+he),Xe=$e.join(""),Ae=Xe.length),k){var Ye=ce+he+Ae;et=c($,"Interop",Ye),Je=et.join(""),We=Je.length}if(B){var Ye=ce+he+Ae+We;if(De=c(Re,"1st",Ye),He=r(d.thumbnail),He.length>64e3)throw new Error("Given thumbnail is too large. max 64kB")}var nt="",it="",at="",rt="\0\0\0\0";if(S){var _e=f+ce,Te=u(">L",[_e]),Ge=34665,xe=u(">H",[Ge]),Fe=u(">H",[w.Long]),Me=u(">L",[1]);nt=xe+Fe+Me+Te}if(g){var _e=f+ce+he,Te=u(">L",[_e]),Ge=34853,xe=u(">H",[Ge]),Fe=u(">H",[w.Long]),Me=u(">L",[1]);it=xe+Fe+Me+Te}if(k){var _e=f+ce+he+Ae,Te=u(">L",[_e]),Ge=40965,xe=u(">H",[Ge]),Fe=u(">H",[w.Long]),Me=u(">L",[1]);at=xe+Fe+Me+Te}if(B){var _e=f+ce+he+Ae+We;rt=u(">L",[_e]);var Mt=_e+De[0].length+24+4+De[1].length,Ot="\0\0\0\0"+u(">L",[Mt]),Bt="\0\0\0\0"+u(">L",[He.length]);tt=De[0]+Ot+Bt+"\0\0\0\0"+De[1]+He}var Nt=Ce[0]+nt+it+rt+Ce[1];return S&&(Ve=pe[0]+at+pe[1]),y+Nt+Ve+Xe+Je+tt};function a(m){return JSON.parse(JSON.stringify(m))}function r(m){for(var f=O(m);"ÿà"<=f[1].slice(0,2)&&f[1].slice(0,2)<="ÿï";)f=[f[0]].concat(f.slice(2));return f.join("")}function s(m){return u(">"+A("B",m.length),m)}function n(m){return u(">"+A("H",m.length),m)}function o(m){return u(">"+A("L",m.length),m)}function l(m,f,d){var y="",S="",g,k,B,x;if(f=="Byte")g=m.length,g<=4?S=s(m)+A("\0",4-g):(S=u(">L",[d]),y=s(m));else if(f=="Short")g=m.length,g<=2?S=n(m)+A("\0\0",2-g):(S=u(">L",[d]),y=n(m));else if(f=="Long")g=m.length,g<=1?S=o(m):(S=u(">L",[d]),y=o(m));else if(f=="Ascii")k=m+"\0",g=k.length,g>4?(S=u(">L",[d]),y=k):S=k+A("\0",4-g);else if(f=="Rational"){if(typeof m[0]=="number")g=1,B=m[0],x=m[1],k=u(">L",[B])+u(">L",[x]);else{g=m.length,k="";for(var G=0;G<g;G++)B=m[G][0],x=m[G][1],k+=u(">L",[B])+u(">L",[x])}S=u(">L",[d]),y=k}else if(f=="SRational"){if(typeof m[0]=="number")g=1,B=m[0],x=m[1],k=u(">l",[B])+u(">l",[x]);else{g=m.length,k="";for(var G=0;G<g;G++)B=m[G][0],x=m[G][1],k+=u(">l",[B])+u(">l",[x])}S=u(">L",[d]),y=k}else f=="Undefined"&&(g=m.length,g>4?(S=u(">L",[d]),y=m):S=m+A("\0",4-g));var $=u(">L",[g]);return[$,S,y]}function c(m,f,d){var y=8,S=Object.keys(m).length,g=u(">H",[S]),k;["0th","1st"].indexOf(f)>-1?k=2+S*12+4:k=2+S*12;var B="",x="",G;for(var G in m)if(typeof G=="string"&&(G=parseInt(G)),!(f=="0th"&&[34665,34853].indexOf(G)>-1)){{if(f=="Exif"&&G==40965)continue;if(f=="1st"&&[513,514].indexOf(G)>-1)continue}var $=m[G],V=u(">H",[G]),Re=F[f][G].type,Ce=u(">H",[w[Re]]);typeof $=="number"&&($=[$]);var ce=y+k+d+x.length,pe=l($,Re,ce),Ve=pe[0],he=pe[1],$e=pe[2];B+=V+Ce+Ve+he,x+=$e}return[g+B,x]}function b(m){var f,d;if(m.slice(0,2)=="ÿØ")f=O(m),d=C(f),d?this.tiftag=d.slice(10):this.tiftag=null;else if(["II","MM"].indexOf(m.slice(0,2))>-1)this.tiftag=m;else if(m.slice(0,4)=="Exif")this.tiftag=m.slice(6);else throw new Error("Given file is neither JPEG nor TIFF.")}if(b.prototype={get_ifd:function(m,f){var d={},y=h(this.endian_mark+"H",this.tiftag.slice(m,m+2))[0],S=m+2,g;["0th","1st"].indexOf(f)>-1?g="Image":g=f;for(var k=0;k<y;k++){m=S+12*k;var B=h(this.endian_mark+"H",this.tiftag.slice(m,m+2))[0],x=h(this.endian_mark+"H",this.tiftag.slice(m+2,m+4))[0],G=h(this.endian_mark+"L",this.tiftag.slice(m+4,m+8))[0],$=this.tiftag.slice(m+8,m+12),V=[x,G,$];B in F[g]&&(d[B]=this.convert_value(V))}return f=="0th"&&(m=S+12*y,d.first_ifd_pointer=this.tiftag.slice(m,m+4)),d},convert_value:function(m){var f=null,d=m[0],y=m[1],S=m[2],g;if(d==1)y>4?(g=h(this.endian_mark+"L",S)[0],f=h(this.endian_mark+A("B",y),this.tiftag.slice(g,g+y))):f=h(this.endian_mark+A("B",y),S.slice(0,y));else if(d==2)y>4?(g=h(this.endian_mark+"L",S)[0],f=this.tiftag.slice(g,g+y-1)):f=S.slice(0,y-1);else if(d==3)y>2?(g=h(this.endian_mark+"L",S)[0],f=h(this.endian_mark+A("H",y),this.tiftag.slice(g,g+y*2))):f=h(this.endian_mark+A("H",y),S.slice(0,y*2));else if(d==4)y>1?(g=h(this.endian_mark+"L",S)[0],f=h(this.endian_mark+A("L",y),this.tiftag.slice(g,g+y*4))):f=h(this.endian_mark+A("L",y),S);else if(d==5)if(g=h(this.endian_mark+"L",S)[0],y>1){f=[];for(var k=0;k<y;k++)f.push([h(this.endian_mark+"L",this.tiftag.slice(g+k*8,g+4+k*8))[0],h(this.endian_mark+"L",this.tiftag.slice(g+4+k*8,g+8+k*8))[0]])}else f=[h(this.endian_mark+"L",this.tiftag.slice(g,g+4))[0],h(this.endian_mark+"L",this.tiftag.slice(g+4,g+8))[0]];else if(d==7)y>4?(g=h(this.endian_mark+"L",S)[0],f=this.tiftag.slice(g,g+y)):f=S.slice(0,y);else if(d==9)y>1?(g=h(this.endian_mark+"L",S)[0],f=h(this.endian_mark+A("l",y),this.tiftag.slice(g,g+y*4))):f=h(this.endian_mark+A("l",y),S);else if(d==10)if(g=h(this.endian_mark+"L",S)[0],y>1){f=[];for(var k=0;k<y;k++)f.push([h(this.endian_mark+"l",this.tiftag.slice(g+k*8,g+4+k*8))[0],h(this.endian_mark+"l",this.tiftag.slice(g+4+k*8,g+8+k*8))[0]])}else f=[h(this.endian_mark+"l",this.tiftag.slice(g,g+4))[0],h(this.endian_mark+"l",this.tiftag.slice(g+4,g+8))[0]];else throw new Error("Exif might be wrong. Got incorrect value type to decode. type:"+d);return f instanceof Array&&f.length==1?f[0]:f}},typeof window<"u"&&typeof window.btoa=="function")var _=window.btoa;if(typeof _>"u")var _=function(f){for(var d="",y,S,g,k,B,x,G,$=0,V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";$<f.length;)y=f.charCodeAt($++),S=f.charCodeAt($++),g=f.charCodeAt($++),k=y>>2,B=(y&3)<<4|S>>4,x=(S&15)<<2|g>>6,G=g&63,isNaN(S)?x=G=64:isNaN(g)&&(G=64),d=d+V.charAt(k)+V.charAt(B)+V.charAt(x)+V.charAt(G);return d};if(typeof window<"u"&&typeof window.atob=="function")var p=window.atob;if(typeof p>"u")var p=function(f){var d="",y,S,g,k,B,x,G,$=0,V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(f=f.replace(/[^A-Za-z0-9\+\/\=]/g,"");$<f.length;)k=V.indexOf(f.charAt($++)),B=V.indexOf(f.charAt($++)),x=V.indexOf(f.charAt($++)),G=V.indexOf(f.charAt($++)),y=k<<2|B>>4,S=(B&15)<<4|x>>2,g=(x&3)<<6|G,d=d+String.fromCharCode(y),x!=64&&(d=d+String.fromCharCode(S)),G!=64&&(d=d+String.fromCharCode(g));return d};function u(m,f){if(!(f instanceof Array))throw new Error("'pack' error. Got invalid type argument.");if(m.length-1!=f.length)throw new Error("'pack' error. "+(m.length-1)+" marks, "+f.length+" elements.");var d;if(m[0]=="<")d=!0;else if(m[0]==">")d=!1;else throw new Error("");for(var y="",S=1,g=null,k=null,B=null;k=m[S];){if(k.toLowerCase()=="b"){if(g=f[S-1],k=="b"&&g<0&&(g+=256),g>255||g<0)throw new Error("'pack' error.");B=String.fromCharCode(g)}else if(k=="H"){if(g=f[S-1],g>65535||g<0)throw new Error("'pack' error.");B=String.fromCharCode(Math.floor(g%65536/256))+String.fromCharCode(g%256),d&&(B=B.split("").reverse().join(""))}else if(k.toLowerCase()=="l"){if(g=f[S-1],k=="l"&&g<0&&(g+=4294967296),g>4294967295||g<0)throw new Error("'pack' error.");B=String.fromCharCode(Math.floor(g/16777216))+String.fromCharCode(Math.floor(g%16777216/65536))+String.fromCharCode(Math.floor(g%65536/256))+String.fromCharCode(g%256),d&&(B=B.split("").reverse().join(""))}else throw new Error("'pack' error.");y+=B,S+=1}return y}function h(m,f){if(typeof f!="string")throw new Error("'unpack' error. Got invalid type argument.");for(var d=0,y=1;y<m.length;y++)if(m[y].toLowerCase()=="b")d+=1;else if(m[y].toLowerCase()=="h")d+=2;else if(m[y].toLowerCase()=="l")d+=4;else throw new Error("'unpack' error. Got invalid mark.");if(d!=f.length)throw new Error("'unpack' error. Mismatch between symbol and string length. "+d+":"+f.length);var S;if(m[0]=="<")S=!0;else if(m[0]==">")S=!1;else throw new Error("'unpack' error.");for(var g=[],k=0,B=1,x=null,G=null,$=null,V="";G=m[B];){if(G.toLowerCase()=="b")$=1,V=f.slice(k,k+$),x=V.charCodeAt(0),G=="b"&&x>=128&&(x-=256);else if(G=="H")$=2,V=f.slice(k,k+$),S&&(V=V.split("").reverse().join("")),x=V.charCodeAt(0)*256+V.charCodeAt(1);else if(G.toLowerCase()=="l")$=4,V=f.slice(k,k+$),S&&(V=V.split("").reverse().join("")),x=V.charCodeAt(0)*16777216+V.charCodeAt(1)*65536+V.charCodeAt(2)*256+V.charCodeAt(3),G=="l"&&x>=2147483648&&(x-=4294967296);else throw new Error("'unpack' error. "+G);g.push(x),k+=$,B+=1}return g}function A(m,f){for(var d="",y=0;y<f;y++)d+=m;return d}function O(m){if(m.slice(0,2)!="ÿØ")throw new Error("Given data isn't JPEG.");for(var f=2,d=["ÿØ"];;){if(m.slice(f,f+2)=="ÿÚ"){d.push(m.slice(f));break}else{var y=h(">H",m.slice(f+2,f+4))[0],S=f+y+2;d.push(m.slice(f,S)),f=S}if(f>=m.length)throw new Error("Wrong JPEG data.")}return d}function C(m){for(var f,d=0;d<m.length;d++)if(f=m[d],f.slice(0,2)=="ÿá"&&f.slice(4,10)=="Exif\0\0")return f;return null}function L(m,f){var d=!1,y=[];return m.forEach(function(S,g){S.slice(0,2)=="ÿá"&&S.slice(4,10)=="Exif\0\0"&&(d?y.unshift(g):(m[g]=f,d=!0))}),y.forEach(function(S){m.splice(S,1)}),!d&&f&&(m=[m[0],f].concat(m.slice(1))),m.join("")}var w={Byte:1,Ascii:2,Short:3,Long:4,Rational:5,Undefined:7,SLong:9,SRational:10},F={Image:{11:{name:"ProcessingSoftware",type:"Ascii"},254:{name:"NewSubfileType",type:"Long"},255:{name:"SubfileType",type:"Short"},256:{name:"ImageWidth",type:"Long"},257:{name:"ImageLength",type:"Long"},258:{name:"BitsPerSample",type:"Short"},259:{name:"Compression",type:"Short"},262:{name:"PhotometricInterpretation",type:"Short"},263:{name:"Threshholding",type:"Short"},264:{name:"CellWidth",type:"Short"},265:{name:"CellLength",type:"Short"},266:{name:"FillOrder",type:"Short"},269:{name:"DocumentName",type:"Ascii"},270:{name:"ImageDescription",type:"Ascii"},271:{name:"Make",type:"Ascii"},272:{name:"Model",type:"Ascii"},273:{name:"StripOffsets",type:"Long"},274:{name:"Orientation",type:"Short"},277:{name:"SamplesPerPixel",type:"Short"},278:{name:"RowsPerStrip",type:"Long"},279:{name:"StripByteCounts",type:"Long"},282:{name:"XResolution",type:"Rational"},283:{name:"YResolution",type:"Rational"},284:{name:"PlanarConfiguration",type:"Short"},290:{name:"GrayResponseUnit",type:"Short"},291:{name:"GrayResponseCurve",type:"Short"},292:{name:"T4Options",type:"Long"},293:{name:"T6Options",type:"Long"},296:{name:"ResolutionUnit",type:"Short"},301:{name:"TransferFunction",type:"Short"},305:{name:"Software",type:"Ascii"},306:{name:"DateTime",type:"Ascii"},315:{name:"Artist",type:"Ascii"},316:{name:"HostComputer",type:"Ascii"},317:{name:"Predictor",type:"Short"},318:{name:"WhitePoint",type:"Rational"},319:{name:"PrimaryChromaticities",type:"Rational"},320:{name:"ColorMap",type:"Short"},321:{name:"HalftoneHints",type:"Short"},322:{name:"TileWidth",type:"Short"},323:{name:"TileLength",type:"Short"},324:{name:"TileOffsets",type:"Short"},325:{name:"TileByteCounts",type:"Short"},330:{name:"SubIFDs",type:"Long"},332:{name:"InkSet",type:"Short"},333:{name:"InkNames",type:"Ascii"},334:{name:"NumberOfInks",type:"Short"},336:{name:"DotRange",type:"Byte"},337:{name:"TargetPrinter",type:"Ascii"},338:{name:"ExtraSamples",type:"Short"},339:{name:"SampleFormat",type:"Short"},340:{name:"SMinSampleValue",type:"Short"},341:{name:"SMaxSampleValue",type:"Short"},342:{name:"TransferRange",type:"Short"},343:{name:"ClipPath",type:"Byte"},344:{name:"XClipPathUnits",type:"Long"},345:{name:"YClipPathUnits",type:"Long"},346:{name:"Indexed",type:"Short"},347:{name:"JPEGTables",type:"Undefined"},351:{name:"OPIProxy",type:"Short"},512:{name:"JPEGProc",type:"Long"},513:{name:"JPEGInterchangeFormat",type:"Long"},514:{name:"JPEGInterchangeFormatLength",type:"Long"},515:{name:"JPEGRestartInterval",type:"Short"},517:{name:"JPEGLosslessPredictors",type:"Short"},518:{name:"JPEGPointTransforms",type:"Short"},519:{name:"JPEGQTables",type:"Long"},520:{name:"JPEGDCTables",type:"Long"},521:{name:"JPEGACTables",type:"Long"},529:{name:"YCbCrCoefficients",type:"Rational"},530:{name:"YCbCrSubSampling",type:"Short"},531:{name:"YCbCrPositioning",type:"Short"},532:{name:"ReferenceBlackWhite",type:"Rational"},700:{name:"XMLPacket",type:"Byte"},18246:{name:"Rating",type:"Short"},18249:{name:"RatingPercent",type:"Short"},32781:{name:"ImageID",type:"Ascii"},33421:{name:"CFARepeatPatternDim",type:"Short"},33422:{name:"CFAPattern",type:"Byte"},33423:{name:"BatteryLevel",type:"Rational"},33432:{name:"Copyright",type:"Ascii"},33434:{name:"ExposureTime",type:"Rational"},34377:{name:"ImageResources",type:"Byte"},34665:{name:"ExifTag",type:"Long"},34675:{name:"InterColorProfile",type:"Undefined"},34853:{name:"GPSTag",type:"Long"},34857:{name:"Interlace",type:"Short"},34858:{name:"TimeZoneOffset",type:"Long"},34859:{name:"SelfTimerMode",type:"Short"},37387:{name:"FlashEnergy",type:"Rational"},37388:{name:"SpatialFrequencyResponse",type:"Undefined"},37389:{name:"Noise",type:"Undefined"},37390:{name:"FocalPlaneXResolution",type:"Rational"},37391:{name:"FocalPlaneYResolution",type:"Rational"},37392:{name:"FocalPlaneResolutionUnit",type:"Short"},37393:{name:"ImageNumber",type:"Long"},37394:{name:"SecurityClassification",type:"Ascii"},37395:{name:"ImageHistory",type:"Ascii"},37397:{name:"ExposureIndex",type:"Rational"},37398:{name:"TIFFEPStandardID",type:"Byte"},37399:{name:"SensingMethod",type:"Short"},40091:{name:"XPTitle",type:"Byte"},40092:{name:"XPComment",type:"Byte"},40093:{name:"XPAuthor",type:"Byte"},40094:{name:"XPKeywords",type:"Byte"},40095:{name:"XPSubject",type:"Byte"},50341:{name:"PrintImageMatching",type:"Undefined"},50706:{name:"DNGVersion",type:"Byte"},50707:{name:"DNGBackwardVersion",type:"Byte"},50708:{name:"UniqueCameraModel",type:"Ascii"},50709:{name:"LocalizedCameraModel",type:"Byte"},50710:{name:"CFAPlaneColor",type:"Byte"},50711:{name:"CFALayout",type:"Short"},50712:{name:"LinearizationTable",type:"Short"},50713:{name:"BlackLevelRepeatDim",type:"Short"},50714:{name:"BlackLevel",type:"Rational"},50715:{name:"BlackLevelDeltaH",type:"SRational"},50716:{name:"BlackLevelDeltaV",type:"SRational"},50717:{name:"WhiteLevel",type:"Short"},50718:{name:"DefaultScale",type:"Rational"},50719:{name:"DefaultCropOrigin",type:"Short"},50720:{name:"DefaultCropSize",type:"Short"},50721:{name:"ColorMatrix1",type:"SRational"},50722:{name:"ColorMatrix2",type:"SRational"},50723:{name:"CameraCalibration1",type:"SRational"},50724:{name:"CameraCalibration2",type:"SRational"},50725:{name:"ReductionMatrix1",type:"SRational"},50726:{name:"ReductionMatrix2",type:"SRational"},50727:{name:"AnalogBalance",type:"Rational"},50728:{name:"AsShotNeutral",type:"Short"},50729:{name:"AsShotWhiteXY",type:"Rational"},50730:{name:"BaselineExposure",type:"SRational"},50731:{name:"BaselineNoise",type:"Rational"},50732:{name:"BaselineSharpness",type:"Rational"},50733:{name:"BayerGreenSplit",type:"Long"},50734:{name:"LinearResponseLimit",type:"Rational"},50735:{name:"CameraSerialNumber",type:"Ascii"},50736:{name:"LensInfo",type:"Rational"},50737:{name:"ChromaBlurRadius",type:"Rational"},50738:{name:"AntiAliasStrength",type:"Rational"},50739:{name:"ShadowScale",type:"SRational"},50740:{name:"DNGPrivateData",type:"Byte"},50741:{name:"MakerNoteSafety",type:"Short"},50778:{name:"CalibrationIlluminant1",type:"Short"},50779:{name:"CalibrationIlluminant2",type:"Short"},50780:{name:"BestQualityScale",type:"Rational"},50781:{name:"RawDataUniqueID",type:"Byte"},50827:{name:"OriginalRawFileName",type:"Byte"},50828:{name:"OriginalRawFileData",type:"Undefined"},50829:{name:"ActiveArea",type:"Short"},50830:{name:"MaskedAreas",type:"Short"},50831:{name:"AsShotICCProfile",type:"Undefined"},50832:{name:"AsShotPreProfileMatrix",type:"SRational"},50833:{name:"CurrentICCProfile",type:"Undefined"},50834:{name:"CurrentPreProfileMatrix",type:"SRational"},50879:{name:"ColorimetricReference",type:"Short"},50931:{name:"CameraCalibrationSignature",type:"Byte"},50932:{name:"ProfileCalibrationSignature",type:"Byte"},50934:{name:"AsShotProfileName",type:"Byte"},50935:{name:"NoiseReductionApplied",type:"Rational"},50936:{name:"ProfileName",type:"Byte"},50937:{name:"ProfileHueSatMapDims",type:"Long"},50938:{name:"ProfileHueSatMapData1",type:"Float"},50939:{name:"ProfileHueSatMapData2",type:"Float"},50940:{name:"ProfileToneCurve",type:"Float"},50941:{name:"ProfileEmbedPolicy",type:"Long"},50942:{name:"ProfileCopyright",type:"Byte"},50964:{name:"ForwardMatrix1",type:"SRational"},50965:{name:"ForwardMatrix2",type:"SRational"},50966:{name:"PreviewApplicationName",type:"Byte"},50967:{name:"PreviewApplicationVersion",type:"Byte"},50968:{name:"PreviewSettingsName",type:"Byte"},50969:{name:"PreviewSettingsDigest",type:"Byte"},50970:{name:"PreviewColorSpace",type:"Long"},50971:{name:"PreviewDateTime",type:"Ascii"},50972:{name:"RawImageDigest",type:"Undefined"},50973:{name:"OriginalRawFileDigest",type:"Undefined"},50974:{name:"SubTileBlockSize",type:"Long"},50975:{name:"RowInterleaveFactor",type:"Long"},50981:{name:"ProfileLookTableDims",type:"Long"},50982:{name:"ProfileLookTableData",type:"Float"},51008:{name:"OpcodeList1",type:"Undefined"},51009:{name:"OpcodeList2",type:"Undefined"},51022:{name:"OpcodeList3",type:"Undefined"}},Exif:{33434:{name:"ExposureTime",type:"Rational"},33437:{name:"FNumber",type:"Rational"},34850:{name:"ExposureProgram",type:"Short"},34852:{name:"SpectralSensitivity",type:"Ascii"},34855:{name:"ISOSpeedRatings",type:"Short"},34856:{name:"OECF",type:"Undefined"},34864:{name:"SensitivityType",type:"Short"},34865:{name:"StandardOutputSensitivity",type:"Long"},34866:{name:"RecommendedExposureIndex",type:"Long"},34867:{name:"ISOSpeed",type:"Long"},34868:{name:"ISOSpeedLatitudeyyy",type:"Long"},34869:{name:"ISOSpeedLatitudezzz",type:"Long"},36864:{name:"ExifVersion",type:"Undefined"},36867:{name:"DateTimeOriginal",type:"Ascii"},36868:{name:"DateTimeDigitized",type:"Ascii"},37121:{name:"ComponentsConfiguration",type:"Undefined"},37122:{name:"CompressedBitsPerPixel",type:"Rational"},37377:{name:"ShutterSpeedValue",type:"SRational"},37378:{name:"ApertureValue",type:"Rational"},37379:{name:"BrightnessValue",type:"SRational"},37380:{name:"ExposureBiasValue",type:"SRational"},37381:{name:"MaxApertureValue",type:"Rational"},37382:{name:"SubjectDistance",type:"Rational"},37383:{name:"MeteringMode",type:"Short"},37384:{name:"LightSource",type:"Short"},37385:{name:"Flash",type:"Short"},37386:{name:"FocalLength",type:"Rational"},37396:{name:"SubjectArea",type:"Short"},37500:{name:"MakerNote",type:"Undefined"},37510:{name:"UserComment",type:"Ascii"},37520:{name:"SubSecTime",type:"Ascii"},37521:{name:"SubSecTimeOriginal",type:"Ascii"},37522:{name:"SubSecTimeDigitized",type:"Ascii"},40960:{name:"FlashpixVersion",type:"Undefined"},40961:{name:"ColorSpace",type:"Short"},40962:{name:"PixelXDimension",type:"Long"},40963:{name:"PixelYDimension",type:"Long"},40964:{name:"RelatedSoundFile",type:"Ascii"},40965:{name:"InteroperabilityTag",type:"Long"},41483:{name:"FlashEnergy",type:"Rational"},41484:{name:"SpatialFrequencyResponse",type:"Undefined"},41486:{name:"FocalPlaneXResolution",type:"Rational"},41487:{name:"FocalPlaneYResolution",type:"Rational"},41488:{name:"FocalPlaneResolutionUnit",type:"Short"},41492:{name:"SubjectLocation",type:"Short"},41493:{name:"ExposureIndex",type:"Rational"},41495:{name:"SensingMethod",type:"Short"},41728:{name:"FileSource",type:"Undefined"},41729:{name:"SceneType",type:"Undefined"},41730:{name:"CFAPattern",type:"Undefined"},41985:{name:"CustomRendered",type:"Short"},41986:{name:"ExposureMode",type:"Short"},41987:{name:"WhiteBalance",type:"Short"},41988:{name:"DigitalZoomRatio",type:"Rational"},41989:{name:"FocalLengthIn35mmFilm",type:"Short"},41990:{name:"SceneCaptureType",type:"Short"},41991:{name:"GainControl",type:"Short"},41992:{name:"Contrast",type:"Short"},41993:{name:"Saturation",type:"Short"},41994:{name:"Sharpness",type:"Short"},41995:{name:"DeviceSettingDescription",type:"Undefined"},41996:{name:"SubjectDistanceRange",type:"Short"},42016:{name:"ImageUniqueID",type:"Ascii"},42032:{name:"CameraOwnerName",type:"Ascii"},42033:{name:"BodySerialNumber",type:"Ascii"},42034:{name:"LensSpecification",type:"Rational"},42035:{name:"LensMake",type:"Ascii"},42036:{name:"LensModel",type:"Ascii"},42037:{name:"LensSerialNumber",type:"Ascii"},42240:{name:"Gamma",type:"Rational"}},GPS:{0:{name:"GPSVersionID",type:"Byte"},1:{name:"GPSLatitudeRef",type:"Ascii"},2:{name:"GPSLatitude",type:"Rational"},3:{name:"GPSLongitudeRef",type:"Ascii"},4:{name:"GPSLongitude",type:"Rational"},5:{name:"GPSAltitudeRef",type:"Byte"},6:{name:"GPSAltitude",type:"Rational"},7:{name:"GPSTimeStamp",type:"Rational"},8:{name:"GPSSatellites",type:"Ascii"},9:{name:"GPSStatus",type:"Ascii"},10:{name:"GPSMeasureMode",type:"Ascii"},11:{name:"GPSDOP",type:"Rational"},12:{name:"GPSSpeedRef",type:"Ascii"},13:{name:"GPSSpeed",type:"Rational"},14:{name:"GPSTrackRef",type:"Ascii"},15:{name:"GPSTrack",type:"Rational"},16:{name:"GPSImgDirectionRef",type:"Ascii"},17:{name:"GPSImgDirection",type:"Rational"},18:{name:"GPSMapDatum",type:"Ascii"},19:{name:"GPSDestLatitudeRef",type:"Ascii"},20:{name:"GPSDestLatitude",type:"Rational"},21:{name:"GPSDestLongitudeRef",type:"Ascii"},22:{name:"GPSDestLongitude",type:"Rational"},23:{name:"GPSDestBearingRef",type:"Ascii"},24:{name:"GPSDestBearing",type:"Rational"},25:{name:"GPSDestDistanceRef",type:"Ascii"},26:{name:"GPSDestDistance",type:"Rational"},27:{name:"GPSProcessingMethod",type:"Undefined"},28:{name:"GPSAreaInformation",type:"Undefined"},29:{name:"GPSDateStamp",type:"Ascii"},30:{name:"GPSDifferential",type:"Short"},31:{name:"GPSHPositioningError",type:"Rational"}},Interop:{1:{name:"InteroperabilityIndex",type:"Ascii"}}};F["0th"]=F.Image,F["1st"]=F.Image,t.TAGS=F,t.ImageIFD={ProcessingSoftware:11,NewSubfileType:254,SubfileType:255,ImageWidth:256,ImageLength:257,BitsPerSample:258,Compression:259,PhotometricInterpretation:262,Threshholding:263,CellWidth:264,CellLength:265,FillOrder:266,DocumentName:269,ImageDescription:270,Make:271,Model:272,StripOffsets:273,Orientation:274,SamplesPerPixel:277,RowsPerStrip:278,StripByteCounts:279,XResolution:282,YResolution:283,PlanarConfiguration:284,GrayResponseUnit:290,GrayResponseCurve:291,T4Options:292,T6Options:293,ResolutionUnit:296,TransferFunction:301,Software:305,DateTime:306,Artist:315,HostComputer:316,Predictor:317,WhitePoint:318,PrimaryChromaticities:319,ColorMap:320,HalftoneHints:321,TileWidth:322,TileLength:323,TileOffsets:324,TileByteCounts:325,SubIFDs:330,InkSet:332,InkNames:333,NumberOfInks:334,DotRange:336,TargetPrinter:337,ExtraSamples:338,SampleFormat:339,SMinSampleValue:340,SMaxSampleValue:341,TransferRange:342,ClipPath:343,XClipPathUnits:344,YClipPathUnits:345,Indexed:346,JPEGTables:347,OPIProxy:351,JPEGProc:512,JPEGInterchangeFormat:513,JPEGInterchangeFormatLength:514,JPEGRestartInterval:515,JPEGLosslessPredictors:517,JPEGPointTransforms:518,JPEGQTables:519,JPEGDCTables:520,JPEGACTables:521,YCbCrCoefficients:529,YCbCrSubSampling:530,YCbCrPositioning:531,ReferenceBlackWhite:532,XMLPacket:700,Rating:18246,RatingPercent:18249,ImageID:32781,CFARepeatPatternDim:33421,CFAPattern:33422,BatteryLevel:33423,Copyright:33432,ExposureTime:33434,ImageResources:34377,ExifTag:34665,InterColorProfile:34675,GPSTag:34853,Interlace:34857,TimeZoneOffset:34858,SelfTimerMode:34859,FlashEnergy:37387,SpatialFrequencyResponse:37388,Noise:37389,FocalPlaneXResolution:37390,FocalPlaneYResolution:37391,FocalPlaneResolutionUnit:37392,ImageNumber:37393,SecurityClassification:37394,ImageHistory:37395,ExposureIndex:37397,TIFFEPStandardID:37398,SensingMethod:37399,XPTitle:40091,XPComment:40092,XPAuthor:40093,XPKeywords:40094,XPSubject:40095,PrintImageMatching:50341,DNGVersion:50706,DNGBackwardVersion:50707,UniqueCameraModel:50708,LocalizedCameraModel:50709,CFAPlaneColor:50710,CFALayout:50711,LinearizationTable:50712,BlackLevelRepeatDim:50713,BlackLevel:50714,BlackLevelDeltaH:50715,BlackLevelDeltaV:50716,WhiteLevel:50717,DefaultScale:50718,DefaultCropOrigin:50719,DefaultCropSize:50720,ColorMatrix1:50721,ColorMatrix2:50722,CameraCalibration1:50723,CameraCalibration2:50724,ReductionMatrix1:50725,ReductionMatrix2:50726,AnalogBalance:50727,AsShotNeutral:50728,AsShotWhiteXY:50729,BaselineExposure:50730,BaselineNoise:50731,BaselineSharpness:50732,BayerGreenSplit:50733,LinearResponseLimit:50734,CameraSerialNumber:50735,LensInfo:50736,ChromaBlurRadius:50737,AntiAliasStrength:50738,ShadowScale:50739,DNGPrivateData:50740,MakerNoteSafety:50741,CalibrationIlluminant1:50778,CalibrationIlluminant2:50779,BestQualityScale:50780,RawDataUniqueID:50781,OriginalRawFileName:50827,OriginalRawFileData:50828,ActiveArea:50829,MaskedAreas:50830,AsShotICCProfile:50831,AsShotPreProfileMatrix:50832,CurrentICCProfile:50833,CurrentPreProfileMatrix:50834,ColorimetricReference:50879,CameraCalibrationSignature:50931,ProfileCalibrationSignature:50932,AsShotProfileName:50934,NoiseReductionApplied:50935,ProfileName:50936,ProfileHueSatMapDims:50937,ProfileHueSatMapData1:50938,ProfileHueSatMapData2:50939,ProfileToneCurve:50940,ProfileEmbedPolicy:50941,ProfileCopyright:50942,ForwardMatrix1:50964,ForwardMatrix2:50965,PreviewApplicationName:50966,PreviewApplicationVersion:50967,PreviewSettingsName:50968,PreviewSettingsDigest:50969,PreviewColorSpace:50970,PreviewDateTime:50971,RawImageDigest:50972,OriginalRawFileDigest:50973,SubTileBlockSize:50974,RowInterleaveFactor:50975,ProfileLookTableDims:50981,ProfileLookTableData:50982,OpcodeList1:51008,OpcodeList2:51009,OpcodeList3:51022,NoiseProfile:51041},t.ExifIFD={ExposureTime:33434,FNumber:33437,ExposureProgram:34850,SpectralSensitivity:34852,ISOSpeedRatings:34855,OECF:34856,SensitivityType:34864,StandardOutputSensitivity:34865,RecommendedExposureIndex:34866,ISOSpeed:34867,ISOSpeedLatitudeyyy:34868,ISOSpeedLatitudezzz:34869,ExifVersion:36864,DateTimeOriginal:36867,DateTimeDigitized:36868,ComponentsConfiguration:37121,CompressedBitsPerPixel:37122,ShutterSpeedValue:37377,ApertureValue:37378,BrightnessValue:37379,ExposureBiasValue:37380,MaxApertureValue:37381,SubjectDistance:37382,MeteringMode:37383,LightSource:37384,Flash:37385,FocalLength:37386,SubjectArea:37396,MakerNote:37500,UserComment:37510,SubSecTime:37520,SubSecTimeOriginal:37521,SubSecTimeDigitized:37522,FlashpixVersion:40960,ColorSpace:40961,PixelXDimension:40962,PixelYDimension:40963,RelatedSoundFile:40964,InteroperabilityTag:40965,FlashEnergy:41483,SpatialFrequencyResponse:41484,FocalPlaneXResolution:41486,FocalPlaneYResolution:41487,FocalPlaneResolutionUnit:41488,SubjectLocation:41492,ExposureIndex:41493,SensingMethod:41495,FileSource:41728,SceneType:41729,CFAPattern:41730,CustomRendered:41985,ExposureMode:41986,WhiteBalance:41987,DigitalZoomRatio:41988,FocalLengthIn35mmFilm:41989,SceneCaptureType:41990,GainControl:41991,Contrast:41992,Saturation:41993,Sharpness:41994,DeviceSettingDescription:41995,SubjectDistanceRange:41996,ImageUniqueID:42016,CameraOwnerName:42032,BodySerialNumber:42033,LensSpecification:42034,LensMake:42035,LensModel:42036,LensSerialNumber:42037,Gamma:42240},t.GPSIFD={GPSVersionID:0,GPSLatitudeRef:1,GPSLatitude:2,GPSLongitudeRef:3,GPSLongitude:4,GPSAltitudeRef:5,GPSAltitude:6,GPSTimeStamp:7,GPSSatellites:8,GPSStatus:9,GPSMeasureMode:10,GPSDOP:11,GPSSpeedRef:12,GPSSpeed:13,GPSTrackRef:14,GPSTrack:15,GPSImgDirectionRef:16,GPSImgDirection:17,GPSMapDatum:18,GPSDestLatitudeRef:19,GPSDestLatitude:20,GPSDestLongitudeRef:21,GPSDestLongitude:22,GPSDestBearingRef:23,GPSDestBearing:24,GPSDestDistanceRef:25,GPSDestDistance:26,GPSProcessingMethod:27,GPSAreaInformation:28,GPSDateStamp:29,GPSDifferential:30,GPSHPositioningError:31},t.InteropIFD={InteroperabilityIndex:1},t.GPSHelper={degToDmsRational:function(m){var f=Math.abs(m),d=f%1*60,y=d%1*60,S=Math.floor(f),g=Math.floor(d),k=Math.round(y*100);return[[S,1],[g,1],[k,100]]},dmsRationalToDeg:function(m,f){var d=f==="S"||f==="W"?-1:1,y=m[0][0]/m[0][1]+m[1][0]/m[1][1]/60+m[2][0]/m[2][1]/3600;return y*d}},i.exports&&(e=i.exports=t),e.piexif=t})()})(Qe,Qe.exports);var Ee=Qe.exports;function ln(i,e){try{const t={},a={},r={};t[Ee.ImageIFD.Make]="LCM Image-to-Image ControNet",t[Ee.ImageIFD.ImageDescription]=`prompt: ${e==null?void 0:e.prompt} | negative_prompt: ${e==null?void 0:e.negative_prompt} | seed: ${e==null?void 0:e.seed} | guidance_scale: ${e==null?void 0:e.guidance_scale}`,t[Ee.ImageIFD.Software]="https://github.com/radames/Real-Time-Latent-Consistency-Model",a[Ee.ExifIFD.DateTimeOriginal]=new Date().toISOString();const s={"0th":t,Exif:a,GPS:r},n=Ee.dump(s),o=document.createElement("canvas");o.width=i.naturalWidth,o.height=i.naturalHeight,o.getContext("2d").drawImage(i,0,0);const c=o.toDataURL("image/jpeg"),b=Ee.insert(n,c),_=document.createElement("a");_.href=b,_.download=`lcm_txt_2_img${Date.now()}.png`,_.click()}catch(t){console.log(t)}}function sn(i){let e,t;return{c(){e=I("img"),this.h()},l(a){e=R(a,"IMG",{class:!0,src:!0}),this.h()},h(){v(e,"class","aspect-square w-full rounded-lg"),Ue(e.src,t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=")||v(e,"src",t)},m(a,r){N(a,e,r)},p:z,i:z,o:z,d(a){a&&P(e)}}}function on(i){let e,t,a,r,s,n;return s=new Ke({props:{disabled:!i[0],title:"Take Snapshot",classList:"text-sm ml-auto text-white p-1 shadow-lg rounded-lg opacity-50",$$slots:{default:[cn]},$$scope:{ctx:i}}}),s.$on("click",i[3]),{c(){e=I("img"),a=H(),r=I("div"),j(s.$$.fragment),this.h()},l(o){e=R(o,"IMG",{class:!0,src:!0}),a=U(o),r=R(o,"DIV",{class:!0});var l=T(r);q(s.$$.fragment,l),l.forEach(P),this.h()},h(){v(e,"class","aspect-square w-full rounded-lg"),Ue(e.src,t="/api/stream/"+i[2])||v(e,"src",t),v(r,"class","absolute bottom-1 right-1")},m(o,l){N(o,e,l),i[5](e),N(o,a,l),N(o,r,l),X(s,r,null),n=!0},p(o,l){(!n||l&4&&!Ue(e.src,t="/api/stream/"+o[2]))&&v(e,"src",t);const c={};l&1&&(c.disabled=!o[0]),l&64&&(c.$$scope={dirty:l,ctx:o}),s.$set(c)},i(o){n||(D(s.$$.fragment,o),n=!0)},o(o){M(s.$$.fragment,o),n=!1},d(o){o&&(P(e),P(a),P(r)),i[5](null),J(s)}}}function cn(i){let e,t;return e=new rn({props:{classList:""}}),{c(){j(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,r){X(e,a,r),t=!0},p:z,i(a){t||(D(e.$$.fragment,a),t=!0)},o(a){M(e.$$.fragment,a),t=!1},d(a){J(e,a)}}}function fn(i){let e,t,a,r;const s=[on,sn],n=[];function o(l,c){return l[0]&&l[2]?0:1}return t=o(i),a=n[t]=s[t](i),{c(){e=I("div"),a.c(),this.h()},l(l){e=R(l,"DIV",{class:!0});var c=T(e);a.l(c),c.forEach(P),this.h()},h(){v(e,"class","relative mx-auto aspect-square max-w-lg self-center overflow-hidden rounded-lg border border-slate-300")},m(l,c){N(l,e,c),n[t].m(e,null),r=!0},p(l,[c]){let b=t;t=o(l),t===b?n[t].p(l,c):(me(),M(n[b],1,1,()=>{n[b]=null}),de(),a=n[t],a?a.p(l,c):(a=n[t]=s[t](l),a.c()),D(a,1),a.m(e,null))},i(l){r||(D(a),r=!0)},o(l){M(a),r=!1},d(l){l&&P(e),n[t].d()}}}function un(i,e,t){let a,r,s;ue(i,fe,c=>t(4,r=c)),ue(i,ke,c=>t(2,s=c));let n;async function o(){var c,b,_,p;a&&await ln(n,{prompt:(c=Oe())==null?void 0:c.prompt,negative_prompt:(b=Oe())==null?void 0:b.negative_prompt,seed:(_=Oe())==null?void 0:_.seed,guidance_scale:(p=Oe())==null?void 0:p.guidance_scale})}function l(c){te[c?"unshift":"push"](()=>{n=c,t(1,n)})}return i.$$.update=()=>{i.$$.dirty&16&&t(0,a=r!==je.DISCONNECTED),i.$$.dirty&1&&console.log("isLCMRunning",a)},[a,n,s,o,r,l]}class mn extends Z{constructor(e){super(),ee(this,e,un,fn,K,{})}}typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(i){const e=performance.now(),t=this.getVideoPlaybackQuality(),a=this.mozPresentedFrames||this.mozPaintedFrames||t.totalVideoFrames-t.droppedVideoFrames,r=(s,n)=>{const o=this.getVideoPlaybackQuality(),l=this.mozPresentedFrames||this.mozPaintedFrames||o.totalVideoFrames-o.droppedVideoFrames;if(l>a){const c=this.mozFrameDelay||o.totalFrameDelay-t.totalFrameDelay||0,b=n-s;i(n,{presentationTime:n+c*1e3,expectedDisplayTime:n+b,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+b/1e3,presentedFrames:l,processingDuration:c}),delete this._rvfcpolyfillmap[e]}else this._rvfcpolyfillmap[e]=requestAnimationFrame(c=>r(n,c))};return this._rvfcpolyfillmap[e]=requestAnimationFrame(s=>r(e,s)),e},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(i){cancelAnimationFrame(this._rvfcpolyfillmap[i]),delete this._rvfcpolyfillmap[i]});var Rt=(i=>(i.INIT="init",i.CONNECTED="connected",i.DISCONNECTED="disconnected",i))(Rt||{});const At=Pe({blob:new Blob}),Ze=Pe([]),Se=Pe("init"),we=Pe(null),Be={async enumerateDevices(){await navigator.mediaDevices.enumerateDevices().then(i=>{const e=i.filter(t=>t.kind==="videoinput");Ze.set(e)}).catch(i=>{console.error(i)})},async start(i){const e={audio:!1,video:{width:1024,height:1024,deviceId:i}};await navigator.mediaDevices.getUserMedia(e).then(t=>{Se.set("connected"),we.set(t)}).catch(t=>{console.error(`${t.name}: ${t.message}`),Se.set("disconnected"),we.set(null)})},async startScreenCapture(){const i={video:{displaySurface:"window"},audio:!1,surfaceSwitching:"include"};let e=null;try{e=await navigator.mediaDevices.getDisplayMedia(i);const t=e.getVideoTracks()[0];console.log("Track settings:"),console.log(JSON.stringify(t.getSettings(),null,2)),console.log("Track constraints:"),console.log(JSON.stringify(t.getConstraints(),null,2)),Se.set("connected"),we.set(e)}catch(t){console.error(t)}},async switchCamera(i){if(Et(Se)!=="connected")return;const e={audio:!1,video:{width:1024,height:1024,deviceId:i}};await navigator.mediaDevices.getUserMedia(e).then(t=>{Se.set("connected"),we.set(t)}).catch(t=>{console.error(`${t.name}: ${t.message}`)})},async stop(){navigator.mediaDevices.getUserMedia({video:!0}).then(i=>{i.getTracks().forEach(e=>e.stop())}),Se.set("disconnected"),we.set(null)}};function dn(i){let e,t;return{c(){e=Le("svg"),t=Le("path"),this.h()},l(a){e=Ie(a,"svg",{xmlns:!0,viewBox:!0,height:!0,class:!0});var r=T(e);t=Ie(r,"path",{fill:!0,d:!0}),T(t).forEach(P),r.forEach(P),this.h()},h(){v(t,"fill","currentColor"),v(t,"d","M64 0A64 64 0 0 0 0 64v288a64 64 0 0 0 64 64h176l-10.7 32H160a32 32 0 1 0 0 64h256a32 32 0 1 0 0-64h-69.3L336 416h176a64 64 0 0 0 64-64V64a64 64 0 0 0-64-64H64zm448 64v288H64V64h448z"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"viewBox","0 -32 576 576"),v(e,"height","16px"),v(e,"class",i[0])},m(a,r){N(a,e,r),E(e,t)},p(a,[r]){r&1&&v(e,"class",a[0])},i:z,o:z,d(a){a&&P(e)}}}function pn(i,e,t){let{classList:a=""}=e;return i.$$set=r=>{"classList"in r&&t(0,a=r.classList)},[a]}class hn extends Z{constructor(e){super(),ee(this,e,pn,dn,K,{classList:0})}}function st(i,e,t){const a=i.slice();return a[5]=e[t],a[7]=t,a}function ot(i){let e,t,a,r=ve(i[1]),s=[];for(let n=0;n<r.length;n+=1)s[n]=ct(st(i,r,n));return{c(){e=I("select");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=R(n,"SELECT",{id:!0,class:!0});var o=T(e);for(let l=0;l<s.length;l+=1)s[l].l(o);o.forEach(P),this.h()},h(){v(e,"id","devices-list"),v(e,"class","border-1 block cursor-pointer rounded-md border-gray-800 border-opacity-50 bg-slate-100 bg-opacity-30 p-1 font-medium text-white"),i[0]===void 0&&kt(()=>i[3].call(e))},m(n,o){N(n,e,o);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null);ze(e,i[0],!0),t||(a=[ie(e,"change",i[3]),ie(e,"change",i[4])],t=!0)},p(n,o){if(o&2){r=ve(n[1]);let l;for(l=0;l<r.length;l+=1){const c=st(n,r,l);s[l]?s[l].p(c,o):(s[l]=ct(c),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=r.length}o&3&&ze(e,n[0])},d(n){n&&P(e),qe(s,n),t=!1,wt(a)}}}function ct(i){let e,t=i[5].label+"",a,r;return{c(){e=I("option"),a=W(t),this.h()},l(s){e=R(s,"OPTION",{});var n=T(e);a=Y(n,t),n.forEach(P),this.h()},h(){e.__value=r=i[5].deviceId,ae(e,e.__value)},m(s,n){N(s,e,n),E(e,a)},p(s,n){n&2&&t!==(t=s[5].label+"")&&ge(a,t),n&2&&r!==(r=s[5].deviceId)&&(e.__value=r,ae(e,e.__value))},d(s){s&&P(e)}}}function gn(i){let e,t,a,r="Share",s,n,o,l,c,b;n=new hn({props:{classList:""}});let _=i[1]&&ot(i);return{c(){e=I("div"),t=I("button"),a=I("span"),a.textContent=r,s=H(),j(n.$$.fragment),o=H(),_&&_.c(),this.h()},l(p){e=R(p,"DIV",{class:!0});var u=T(e);t=R(u,"BUTTON",{title:!0,class:!0});var h=T(t);a=R(h,"SPAN",{"data-svelte-h":!0}),be(a)!=="svelte-1ahaqi7"&&(a.textContent=r),s=U(h),q(n.$$.fragment,h),h.forEach(P),o=U(u),_&&_.l(u),u.forEach(P),this.h()},h(){v(t,"title","Share your screen"),v(t,"class","border-1 my-1 flex cursor-pointer gap-1 rounded-md border-gray-500 border-opacity-50 bg-slate-100 bg-opacity-30 p-1 font-medium text-white"),v(e,"class","flex items-center justify-center text-xs")},m(p,u){N(p,e,u),E(e,t),E(t,a),E(t,s),X(n,t,null),E(e,o),_&&_.m(e,null),l=!0,c||(b=ie(t,"click",i[2]),c=!0)},p(p,[u]){p[1]?_?_.p(p,u):(_=ot(p),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},i(p){l||(D(n.$$.fragment,p),l=!0)},o(p){M(n.$$.fragment,p),l=!1},d(p){p&&P(e),J(n),_&&_.d(),c=!1,b()}}}function _n(i,e,t){let a;ue(i,Ze,l=>t(1,a=l));let r="";ye(()=>{t(0,r=a[0].deviceId)});const s=()=>Be.startScreenCapture();function n(){r=Lt(this),t(0,r)}const o=()=>Be.switchCamera(r);return i.$$.update=()=>{i.$$.dirty&2&&console.log(a),i.$$.dirty&1&&console.log(r)},[r,a,s,n,o]}class vn extends Z{constructor(e){super(),ee(this,e,_n,gn,K,{})}}function ft(i){let e,t,a;return t=new vn({}),{c(){e=I("div"),j(t.$$.fragment),this.h()},l(r){e=R(r,"DIV",{class:!0});var s=T(e);q(t.$$.fragment,s),s.forEach(P),this.h()},h(){v(e,"class","absolute bottom-0 right-0 z-10")},m(r,s){N(r,e,s),X(t,e,null),a=!0},i(r){a||(D(t.$$.fragment,r),a=!0)},o(r){M(t.$$.fragment,r),a=!1},d(r){r&&P(e),J(t)}}}function yn(i){let e,t,a,r,s,n,o,l,c='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 448" class="w-40 p-5 opacity-20"><path fill="currentColor" d="M224 256a128 128 0 1 0 0-256 128 128 0 1 0 0 256zm-45.7 48A178.3 178.3 0 0 0 0 482.3 29.7 29.7 0 0 0 29.7 512h388.6a29.7 29.7 0 0 0 29.7-29.7c0-98.5-79.8-178.3-178.3-178.3h-91.4z"></path></svg>',b,_,p,u=i[3].length>0&&ft();return{c(){e=I("div"),t=I("div"),u&&u.c(),a=H(),r=I("video"),s=H(),n=I("canvas"),o=H(),l=I("div"),l.innerHTML=c,this.h()},l(h){e=R(h,"DIV",{class:!0});var A=T(e);t=R(A,"DIV",{class:!0});var O=T(t);u&&u.l(O),a=U(O),r=R(O,"VIDEO",{class:!0}),T(r).forEach(P),s=U(O),n=R(O,"CANVAS",{class:!0}),T(n).forEach(P),O.forEach(P),o=U(A),l=R(A,"DIV",{class:!0,"data-svelte-h":!0}),be(l)!=="svelte-gk33v1"&&(l.innerHTML=c),A.forEach(P),this.h()},h(){v(r,"class","pointer-events-none aspect-square w-full object-cover"),r.playsInline=!0,r.autoplay=!0,r.muted=!0,r.loop=!0,v(n,"class","absolute left-0 top-0 aspect-square w-full object-cover"),v(t,"class","relative z-10 aspect-square w-full object-cover"),v(l,"class","absolute left-0 top-0 flex aspect-square w-full items-center justify-center"),v(e,"class","relative mx-auto max-w-lg overflow-hidden rounded-lg border border-slate-300")},m(h,A){N(h,e,A),E(e,t),u&&u.m(t,null),E(t,a),E(t,r),i[8](r),E(t,s),E(t,n),i[10](n),E(e,o),E(e,l),b=!0,_||(p=ie(r,"loadeddata",i[9]),_=!0)},p(h,[A]){h[3].length>0?u?A&8&&D(u,1):(u=ft(),u.c(),D(u,1),u.m(t,a)):u&&(me(),M(u,1,1,()=>{u=null}),de())},i(h){b||(D(u),b=!0)},o(h){M(u),b=!1},d(h){h&&P(e),u&&u.d(),i[8](null),i[10](null),_=!1,p()}}}let Sn="",bn=0;function Pn(i,e,t){let a,r,s;ue(i,Se,w=>t(6,a=w)),ue(i,we,w=>t(7,r=w)),ue(i,Ze,w=>t(3,s=w));let{width:n=512}=e,{height:o=512}=e;const l={width:n,height:o};let c,b,_,p;const u=1e3/120;let h=!1;ye(()=>{_=b.getContext("2d"),t(2,b.width=l.width,b),t(2,b.height=l.height,b)}),jt(()=>{p&&c.cancelVideoFrameCallback(p)});async function A(w,F){if(w-bn<u){p=c.requestVideoFrameCallback(A);return}const m=c.videoWidth,f=c.videoHeight;let d=f,y=m,S=0,g=0;m>f?(y=f,S=(m-f)/2):(d=m,g=(f-m)/2),_.drawImage(c,S,g,y,d,0,0,l.width,l.height);const k=await new Promise(B=>{b.toBlob(x=>{B(x)},"image/jpeg",1)});At.set({blob:k}),p=c.requestVideoFrameCallback(A)}function O(w){te[w?"unshift":"push"](()=>{c=w,t(0,c),t(7,r)})}const C=()=>{t(1,h=!0)};function L(w){te[w?"unshift":"push"](()=>{b=w,t(2,b)})}return i.$$set=w=>{"width"in w&&t(4,n=w.width),"height"in w&&t(5,o=w.height)},i.$$.update=()=>{i.$$.dirty&129&&c&&t(0,c.srcObject=r,c),i.$$.dirty&67&&a==Rt.CONNECTED&&h&&(p=c.requestVideoFrameCallback(A))},console.log(Sn),[c,h,b,s,n,o,a,r,O,C,L]}class Cn extends Z{constructor(e){super(),ee(this,e,Pn,yn,K,{width:4,height:5})}}function En(i){var L;let e,t,a=((L=i[1])==null?void 0:L.title)+"",r,s,n,o,l,c,b,_,p,u,h,A,O,C;return{c(){e=I("div"),t=I("label"),r=W(a),n=H(),o=I("input"),u=H(),h=I("input"),this.h()},l(w){e=R(w,"DIV",{class:!0});var F=T(e);t=R(F,"LABEL",{class:!0,for:!0});var m=T(t);r=Y(m,a),m.forEach(P),n=U(F),o=R(F,"INPUT",{class:!0,type:!0,id:!0,name:!0,min:!0,max:!0,step:!0}),u=U(F),h=R(F,"INPUT",{type:!0,step:!0,class:!0}),F.forEach(P),this.h()},h(){var w,F,m,f;v(t,"class","text-sm font-medium"),v(t,"for",s=i[1].id),v(o,"class","col-span-2 h-2 w-full cursor-pointer appearance-none rounded-lg bg-gray-300 dark:bg-gray-500"),v(o,"type","range"),v(o,"id",l=i[1].id),v(o,"name",c=i[1].id),v(o,"min",b=(w=i[1])==null?void 0:w.min),v(o,"max",_=(F=i[1])==null?void 0:F.max),v(o,"step",p=((m=i[1])==null?void 0:m.step)??1),v(h,"type","number"),v(h,"step",A=((f=i[1])==null?void 0:f.step)??1),v(h,"class","rounded-md border px-1 py-1 text-center text-xs font-bold dark:text-black"),v(e,"class","grid max-w-md grid-cols-4 items-center gap-3")},m(w,F){N(w,e,F),E(e,t),E(t,r),E(e,n),E(e,o),ae(o,i[0]),E(e,u),E(e,h),ae(h,i[0]),O||(C=[ie(o,"change",i[2]),ie(o,"input",i[2]),ie(h,"input",i[3])],O=!0)},p(w,[F]){var m,f,d,y,S;F&2&&a!==(a=((m=w[1])==null?void 0:m.title)+"")&&ge(r,a),F&2&&s!==(s=w[1].id)&&v(t,"for",s),F&2&&l!==(l=w[1].id)&&v(o,"id",l),F&2&&c!==(c=w[1].id)&&v(o,"name",c),F&2&&b!==(b=(f=w[1])==null?void 0:f.min)&&v(o,"min",b),F&2&&_!==(_=(d=w[1])==null?void 0:d.max)&&v(o,"max",_),F&2&&p!==(p=((y=w[1])==null?void 0:y.step)??1)&&v(o,"step",p),F&1&&ae(o,w[0]),F&2&&A!==(A=((S=w[1])==null?void 0:S.step)??1)&&v(h,"step",A),F&1&&Ne(h.value)!==w[0]&&ae(h,w[0])},i:z,o:z,d(w){w&&P(e),O=!1,wt(C)}}}function kn(i,e,t){let{value:a=8}=e,{params:r}=e;ye(()=>{t(0,a=Number(r==null?void 0:r.default)??8)});function s(){a=Ne(this.value),t(0,a)}function n(){a=Ne(this.value),t(0,a)}return i.$$set=o=>{"value"in o&&t(0,a=o.value),"params"in o&&t(1,r=o.params)},[a,r,s,n]}class Dt extends Z{constructor(e){super(),ee(this,e,kn,En,K,{value:0,params:1})}}function wn(i){let e;return{c(){e=W("Rand")},l(t){e=Y(t,"Rand")},m(t,a){N(t,e,a)},d(t){t&&P(e)}}}function Ln(i){let e,t,a="Seed",r,s,n,o,l,c,b;return o=new Ke({props:{$$slots:{default:[wn]},$$scope:{ctx:i}}}),o.$on("click",i[1]),{c(){e=I("div"),t=I("label"),t.textContent=a,r=H(),s=I("input"),n=H(),j(o.$$.fragment),this.h()},l(_){e=R(_,"DIV",{class:!0});var p=T(e);t=R(p,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),be(t)!=="svelte-nnsryo"&&(t.textContent=a),r=U(p),s=R(p,"INPUT",{type:!0,id:!0,name:!0,class:!0}),n=U(p),q(o.$$.fragment,p),p.forEach(P),this.h()},h(){v(t,"class","text-sm font-medium"),v(t,"for","seed"),v(s,"type","number"),v(s,"id","seed"),v(s,"name","seed"),v(s,"class","col-span-2 rounded-md border border-gray-700 p-2 text-right font-light dark:text-black"),v(e,"class","grid max-w-md grid-cols-4 items-center gap-3")},m(_,p){N(_,e,p),E(e,t),E(e,r),E(e,s),ae(s,i[0]),E(e,n),X(o,e,null),l=!0,c||(b=ie(s,"input",i[3]),c=!0)},p(_,[p]){p&1&&Ne(s.value)!==_[0]&&ae(s,_[0]);const u={};p&16&&(u.$$scope={dirty:p,ctx:_}),o.$set(u)},i(_){l||(D(o.$$.fragment,_),l=!0)},o(_){M(o.$$.fragment,_),l=!1},d(_){_&&P(e),J(o),c=!1,b()}}}function In(i,e,t){let{value:a=299792458}=e,{params:r}=e;ye(()=>{t(0,a=Number((r==null?void 0:r.default)??""))});function s(){t(0,a=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))}function n(){a=Ne(this.value),t(0,a)}return i.$$set=o=>{"value"in o&&t(0,a=o.value),"params"in o&&t(2,r=o.params)},[a,s,r,n]}class Tt extends Z{constructor(e){super(),ee(this,e,In,Ln,K,{value:0,params:2})}}function Rn(i){var p;let e,t,a=((p=i[1])==null?void 0:p.title)+"",r,s,n,o,l,c,b,_;return{c(){e=I("div"),t=I("label"),r=W(a),n=H(),o=I("div"),l=I("textarea"),this.h()},l(u){e=R(u,"DIV",{class:!0});var h=T(e);t=R(h,"LABEL",{class:!0,for:!0});var A=T(t);r=Y(A,a),A.forEach(P),n=U(h),o=R(h,"DIV",{class:!0});var O=T(o);l=R(O,"TEXTAREA",{class:!0,title:!0,placeholder:!0}),T(l).forEach(P),O.forEach(P),h.forEach(P),this.h()},h(){var u,h;v(t,"class","text-sm font-medium"),v(t,"for",s=(u=i[1])==null?void 0:u.title),v(l,"class","mx-1 w-full px-3 py-2 font-light outline-none dark:text-black"),v(l,"title",c=(h=i[1])==null?void 0:h.title),v(l,"placeholder","Add your prompt here..."),v(o,"class","text-normal flex items-center rounded-md border border-gray-700"),v(e,"class","")},m(u,h){N(u,e,h),E(e,t),E(t,r),E(e,n),E(e,o),E(o,l),ae(l,i[0]),b||(_=ie(l,"input",i[2]),b=!0)},p(u,[h]){var A,O,C;h&2&&a!==(a=((A=u[1])==null?void 0:A.title)+"")&&ge(r,a),h&2&&s!==(s=(O=u[1])==null?void 0:O.title)&&v(t,"for",s),h&2&&c!==(c=(C=u[1])==null?void 0:C.title)&&v(l,"title",c),h&1&&ae(l,u[0])},i:z,o:z,d(u){u&&P(e),b=!1,_()}}}function An(i,e,t){let{value:a}=e,{params:r}=e;ye(()=>{t(0,a=String((r==null?void 0:r.default)??""))});function s(){a=this.value,t(0,a)}return i.$$set=n=>{"value"in n&&t(0,a=n.value),"params"in n&&t(1,r=n.params)},[a,r,s]}class Gt extends Z{constructor(e){super(),ee(this,e,An,Rn,K,{value:0,params:1})}}function Dn(i){var _;let e,t,a=((_=i[1])==null?void 0:_.title)+"",r,s,n,o,l,c,b;return{c(){e=I("div"),t=I("label"),r=W(a),n=H(),o=I("input"),this.h()},l(p){e=R(p,"DIV",{class:!0});var u=T(e);t=R(u,"LABEL",{class:!0,for:!0});var h=T(t);r=Y(h,a),h.forEach(P),n=U(u),o=R(u,"INPUT",{type:!0,id:!0,class:!0}),u.forEach(P),this.h()},h(){v(t,"class","text-sm font-medium"),v(t,"for",s=i[1].id),v(o,"type","checkbox"),v(o,"id",l=i[1].id),v(o,"class","cursor-pointer"),v(e,"class","grid max-w-md grid-cols-4 items-center justify-items-start gap-3")},m(p,u){N(p,e,u),E(e,t),E(t,r),E(e,n),E(e,o),o.checked=i[0],c||(b=ie(o,"change",i[2]),c=!0)},p(p,[u]){var h;u&2&&a!==(a=((h=p[1])==null?void 0:h.title)+"")&&ge(r,a),u&2&&s!==(s=p[1].id)&&v(t,"for",s),u&2&&l!==(l=p[1].id)&&v(o,"id",l),u&1&&(o.checked=p[0])},i:z,o:z,d(p){p&&P(e),c=!1,b()}}}function Tn(i,e,t){let{value:a=!1}=e,{params:r}=e;ye(()=>{t(0,a=!!(r!=null&&r.default))});function s(){a=this.checked,t(0,a)}return i.$$set=n=>{"value"in n&&t(0,a=n.value),"params"in n&&t(1,r=n.params)},[a,r,s]}class xt extends Z{constructor(e){super(),ee(this,e,Tn,Dn,K,{value:0,params:1})}}function ut(i,e,t){const a=i.slice();return a[3]=e[t],a[5]=t,a}function mt(i){let e,t,a,r=ve(i[1].values),s=[];for(let n=0;n<r.length;n+=1)s[n]=dt(ut(i,r,n));return{c(){e=I("select");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=R(n,"SELECT",{id:!0,class:!0});var o=T(e);for(let l=0;l<s.length;l+=1)s[l].l(o);o.forEach(P),this.h()},h(){v(e,"id","model-list"),v(e,"class","cursor-pointer rounded-md border-2 border-gray-500 p-2 font-light dark:text-black"),i[0]===void 0&&kt(()=>i[2].call(e))},m(n,o){N(n,e,o);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null);ze(e,i[0],!0),t||(a=ie(e,"change",i[2]),t=!0)},p(n,o){if(o&2){r=ve(n[1].values);let l;for(l=0;l<r.length;l+=1){const c=ut(n,r,l);s[l]?s[l].p(c,o):(s[l]=dt(c),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=r.length}o&3&&ze(e,n[0])},d(n){n&&P(e),qe(s,n),t=!1,a()}}}function dt(i){let e,t=i[3]+"",a,r;return{c(){e=I("option"),a=W(t),this.h()},l(s){e=R(s,"OPTION",{});var n=T(e);a=Y(n,t),n.forEach(P),this.h()},h(){e.__value=r=i[3],ae(e,e.__value),e.selected=i[5]===0},m(s,n){N(s,e,n),E(e,a)},p(s,n){n&2&&t!==(t=s[3]+"")&&ge(a,t),n&2&&r!==(r=s[3])&&(e.__value=r,ae(e,e.__value))},d(s){s&&P(e)}}}function Gn(i){var o,l;let e,t,a=((o=i[1])==null?void 0:o.title)+"",r,s,n=((l=i[1])==null?void 0:l.values)&&mt(i);return{c(){e=I("div"),t=I("label"),r=W(a),s=H(),n&&n.c(),this.h()},l(c){e=R(c,"DIV",{class:!0});var b=T(e);t=R(b,"LABEL",{for:!0,class:!0});var _=T(t);r=Y(_,a),_.forEach(P),s=U(b),n&&n.l(b),b.forEach(P),this.h()},h(){v(t,"for","model-list"),v(t,"class","text-sm font-medium"),v(e,"class","grid max-w-md grid-cols-4 items-center justify-items-start gap-3")},m(c,b){N(c,e,b),E(e,t),E(t,r),E(e,s),n&&n.m(e,null)},p(c,[b]){var _,p;b&2&&a!==(a=((_=c[1])==null?void 0:_.title)+"")&&ge(r,a),(p=c[1])!=null&&p.values?n?n.p(c,b):(n=mt(c),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:z,o:z,d(c){c&&P(e),n&&n.d()}}}function xn(i,e,t){let{value:a=""}=e,{params:r}=e;ye(()=>{t(0,a=String(r==null?void 0:r.default))});function s(){a=Lt(this),t(0,a),t(1,r)}return i.$$set=n=>{"value"in n&&t(0,a=n.value),"params"in n&&t(1,r=n.params)},[a,r,s]}class Ft extends Z{constructor(e){super(),ee(this,e,xn,Gn,K,{value:0,params:1})}}function pt(i,e,t){const a=i.slice();return a[14]=e[t],a[15]=e,a[16]=t,a}function ht(i,e,t){const a=i.slice();return a[14]=e[t],a[17]=e,a[18]=t,a}function gt(i){let e,t,a=ve(i[1]),r=[];for(let n=0;n<a.length;n+=1)r[n]=_t(ht(i,a,n));const s=n=>M(r[n],1,1,()=>{r[n]=null});return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=re()},l(n){for(let o=0;o<r.length;o+=1)r[o].l(n);e=re()},m(n,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,o);N(n,e,o),t=!0},p(n,o){if(o&10){a=ve(n[1]);let l;for(l=0;l<a.length;l+=1){const c=ht(n,a,l);r[l]?(r[l].p(c,o),D(r[l],1)):(r[l]=_t(c),r[l].c(),D(r[l],1),r[l].m(e.parentNode,e))}for(me(),l=a.length;l<r.length;l+=1)s(l);de()}},i(n){if(!t){for(let o=0;o<a.length;o+=1)D(r[o]);t=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)M(r[o]);t=!1},d(n){n&&P(e),qe(r,n)}}}function Fn(i){let e,t,a;function r(n){i[8](n,i[14])}let s={params:i[14]};return i[3][i[14].id]!==void 0&&(s.value=i[3][i[14].id]),e=new Ft({props:s}),te.push(()=>oe(e,"value",r)),{c(){j(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){X(e,n,o),a=!0},p(n,o){i=n;const l={};o&2&&(l.params=i[14]),!t&&o&10&&(t=!0,l.value=i[3][i[14].id],se(()=>t=!1)),e.$set(l)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){J(e,n)}}}function Mn(i){let e,t,a;function r(n){i[7](n,i[14])}let s={params:i[14]};return i[3][i[14].id]!==void 0&&(s.value=i[3][i[14].id]),e=new xt({props:s}),te.push(()=>oe(e,"value",r)),{c(){j(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){X(e,n,o),a=!0},p(n,o){i=n;const l={};o&2&&(l.params=i[14]),!t&&o&10&&(t=!0,l.value=i[3][i[14].id],se(()=>t=!1)),e.$set(l)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){J(e,n)}}}function On(i){let e,t,a;function r(n){i[6](n,i[14])}let s={params:i[14]};return i[3][i[14].id]!==void 0&&(s.value=i[3][i[14].id]),e=new Gt({props:s}),te.push(()=>oe(e,"value",r)),{c(){j(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){X(e,n,o),a=!0},p(n,o){i=n;const l={};o&2&&(l.params=i[14]),!t&&o&10&&(t=!0,l.value=i[3][i[14].id],se(()=>t=!1)),e.$set(l)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){J(e,n)}}}function Bn(i){let e,t,a;function r(n){i[5](n,i[14])}let s={params:i[14]};return i[3][i[14].id]!==void 0&&(s.value=i[3][i[14].id]),e=new Tt({props:s}),te.push(()=>oe(e,"value",r)),{c(){j(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){X(e,n,o),a=!0},p(n,o){i=n;const l={};o&2&&(l.params=i[14]),!t&&o&10&&(t=!0,l.value=i[3][i[14].id],se(()=>t=!1)),e.$set(l)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){J(e,n)}}}function Nn(i){let e,t,a;function r(n){i[4](n,i[14])}let s={params:i[14]};return i[3][i[14].id]!==void 0&&(s.value=i[3][i[14].id]),e=new Dt({props:s}),te.push(()=>oe(e,"value",r)),{c(){j(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){X(e,n,o),a=!0},p(n,o){i=n;const l={};o&2&&(l.params=i[14]),!t&&o&10&&(t=!0,l.value=i[3][i[14].id],se(()=>t=!1)),e.$set(l)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){J(e,n)}}}function _t(i){let e,t,a,r;const s=[Nn,Bn,On,Mn,Fn],n=[];function o(l,c){return l[14].field===le.RANGE?0:l[14].field===le.SEED?1:l[14].field===le.TEXTAREA?2:l[14].field===le.CHECKBOX?3:l[14].field===le.SELECT?4:-1}return~(e=o(i))&&(t=n[e]=s[e](i)),{c(){t&&t.c(),a=re()},l(l){t&&t.l(l),a=re()},m(l,c){~e&&n[e].m(l,c),N(l,a,c),r=!0},p(l,c){let b=e;e=o(l),e===b?~e&&n[e].p(l,c):(t&&(me(),M(n[b],1,1,()=>{n[b]=null}),de()),~e?(t=n[e],t?t.p(l,c):(t=n[e]=s[e](l),t.c()),D(t,1),t.m(a.parentNode,a)):t=null)},i(l){r||(D(t),r=!0)},o(l){M(t),r=!1},d(l){l&&P(a),~e&&n[e].d(l)}}}function vt(i){let e,t,a="Advanced Options",r,s,n,o,l=ve(i[2]),c=[];for(let _=0;_<l.length;_+=1)c[_]=yt(pt(i,l,_));const b=_=>M(c[_],1,1,()=>{c[_]=null});return{c(){e=I("details"),t=I("summary"),t.textContent=a,r=H(),s=I("div");for(let _=0;_<c.length;_+=1)c[_].c();this.h()},l(_){e=R(_,"DETAILS",{});var p=T(e);t=R(p,"SUMMARY",{class:!0,"data-svelte-h":!0}),be(t)!=="svelte-uye1v8"&&(t.textContent=a),r=U(p),s=R(p,"DIV",{class:!0});var u=T(s);for(let h=0;h<c.length;h+=1)c[h].l(u);u.forEach(P),p.forEach(P),this.h()},h(){v(t,"class","cursor-pointer font-medium"),v(s,"class",n="grid grid-cols-1 items-center gap-3 "+(Object.values(i[0]).length>5?"sm:grid-cols-2":""))},m(_,p){N(_,e,p),E(e,t),E(e,r),E(e,s);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(s,null);o=!0},p(_,p){if(p&12){l=ve(_[2]);let u;for(u=0;u<l.length;u+=1){const h=pt(_,l,u);c[u]?(c[u].p(h,p),D(c[u],1)):(c[u]=yt(h),c[u].c(),D(c[u],1),c[u].m(s,null))}for(me(),u=l.length;u<c.length;u+=1)b(u);de()}(!o||p&1&&n!==(n="grid grid-cols-1 items-center gap-3 "+(Object.values(_[0]).length>5?"sm:grid-cols-2":"")))&&v(s,"class",n)},i(_){if(!o){for(let p=0;p<l.length;p+=1)D(c[p]);o=!0}},o(_){c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)M(c[p]);o=!1},d(_){_&&P(e),qe(c,_)}}}function Vn(i){let e,t,a;function r(n){i[13](n,i[14])}let s={params:i[14]};return i[3][i[14].id]!==void 0&&(s.value=i[3][i[14].id]),e=new Ft({props:s}),te.push(()=>oe(e,"value",r)),{c(){j(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){X(e,n,o),a=!0},p(n,o){i=n;const l={};o&4&&(l.params=i[14]),!t&&o&12&&(t=!0,l.value=i[3][i[14].id],se(()=>t=!1)),e.$set(l)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){J(e,n)}}}function $n(i){let e,t,a;function r(n){i[12](n,i[14])}let s={params:i[14]};return i[3][i[14].id]!==void 0&&(s.value=i[3][i[14].id]),e=new xt({props:s}),te.push(()=>oe(e,"value",r)),{c(){j(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){X(e,n,o),a=!0},p(n,o){i=n;const l={};o&4&&(l.params=i[14]),!t&&o&12&&(t=!0,l.value=i[3][i[14].id],se(()=>t=!1)),e.$set(l)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){J(e,n)}}}function Hn(i){let e,t,a;function r(n){i[11](n,i[14])}let s={params:i[14]};return i[3][i[14].id]!==void 0&&(s.value=i[3][i[14].id]),e=new Gt({props:s}),te.push(()=>oe(e,"value",r)),{c(){j(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){X(e,n,o),a=!0},p(n,o){i=n;const l={};o&4&&(l.params=i[14]),!t&&o&12&&(t=!0,l.value=i[3][i[14].id],se(()=>t=!1)),e.$set(l)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){J(e,n)}}}function Un(i){let e,t,a;function r(n){i[10](n,i[14])}let s={params:i[14]};return i[3][i[14].id]!==void 0&&(s.value=i[3][i[14].id]),e=new Tt({props:s}),te.push(()=>oe(e,"value",r)),{c(){j(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){X(e,n,o),a=!0},p(n,o){i=n;const l={};o&4&&(l.params=i[14]),!t&&o&12&&(t=!0,l.value=i[3][i[14].id],se(()=>t=!1)),e.$set(l)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){J(e,n)}}}function zn(i){let e,t,a;function r(n){i[9](n,i[14])}let s={params:i[14]};return i[3][i[14].id]!==void 0&&(s.value=i[3][i[14].id]),e=new Dt({props:s}),te.push(()=>oe(e,"value",r)),{c(){j(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){X(e,n,o),a=!0},p(n,o){i=n;const l={};o&4&&(l.params=i[14]),!t&&o&12&&(t=!0,l.value=i[3][i[14].id],se(()=>t=!1)),e.$set(l)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){J(e,n)}}}function yt(i){let e,t,a,r;const s=[zn,Un,Hn,$n,Vn],n=[];function o(l,c){return l[14].field===le.RANGE?0:l[14].field===le.SEED?1:l[14].field===le.TEXTAREA?2:l[14].field===le.CHECKBOX?3:l[14].field===le.SELECT?4:-1}return~(e=o(i))&&(t=n[e]=s[e](i)),{c(){t&&t.c(),a=re()},l(l){t&&t.l(l),a=re()},m(l,c){~e&&n[e].m(l,c),N(l,a,c),r=!0},p(l,c){let b=e;e=o(l),e===b?~e&&n[e].p(l,c):(t&&(me(),M(n[b],1,1,()=>{n[b]=null}),de()),~e?(t=n[e],t?t.p(l,c):(t=n[e]=s[e](l),t.c()),D(t,1),t.m(a.parentNode,a)):t=null)},i(l){r||(D(t),r=!0)},o(l){M(t),r=!1},d(l){l&&P(a),~e&&n[e].d(l)}}}function jn(i){let e,t,a,r,s=i[1]&&gt(i),n=i[2]&&i[2].length>0&&vt(i);return{c(){e=I("div"),t=I("div"),s&&s.c(),a=H(),n&&n.c(),this.h()},l(o){e=R(o,"DIV",{class:!0});var l=T(e);t=R(l,"DIV",{class:!0});var c=T(t);s&&s.l(c),c.forEach(P),a=U(l),n&&n.l(l),l.forEach(P),this.h()},h(){v(t,"class","grid grid-cols-1 items-center gap-3"),v(e,"class","flex flex-col gap-3")},m(o,l){N(o,e,l),E(e,t),s&&s.m(t,null),E(e,a),n&&n.m(e,null),r=!0},p(o,[l]){o[1]?s?(s.p(o,l),l&2&&D(s,1)):(s=gt(o),s.c(),D(s,1),s.m(t,null)):s&&(me(),M(s,1,1,()=>{s=null}),de()),o[2]&&o[2].length>0?n?(n.p(o,l),l&4&&D(n,1)):(n=vt(o),n.c(),D(n,1),n.m(e,null)):n&&(me(),M(n,1,1,()=>{n=null}),de())},i(o){r||(D(s),D(n),r=!0)},o(o){M(s),M(n),r=!1},d(o){o&&P(e),s&&s.d(),n&&n.d()}}}function qn(i,e,t){let a,r,s;ue(i,ne,C=>t(3,s=C));let{pipelineParams:n}=e;function o(C,L){i.$$.not_equal(s[L.id],C)&&(s[L.id]=C,ne.set(s))}function l(C,L){i.$$.not_equal(s[L.id],C)&&(s[L.id]=C,ne.set(s))}function c(C,L){i.$$.not_equal(s[L.id],C)&&(s[L.id]=C,ne.set(s))}function b(C,L){i.$$.not_equal(s[L.id],C)&&(s[L.id]=C,ne.set(s))}function _(C,L){i.$$.not_equal(s[L.id],C)&&(s[L.id]=C,ne.set(s))}function p(C,L){i.$$.not_equal(s[L.id],C)&&(s[L.id]=C,ne.set(s))}function u(C,L){i.$$.not_equal(s[L.id],C)&&(s[L.id]=C,ne.set(s))}function h(C,L){i.$$.not_equal(s[L.id],C)&&(s[L.id]=C,ne.set(s))}function A(C,L){i.$$.not_equal(s[L.id],C)&&(s[L.id]=C,ne.set(s))}function O(C,L){i.$$.not_equal(s[L.id],C)&&(s[L.id]=C,ne.set(s))}return i.$$set=C=>{"pipelineParams"in C&&t(0,n=C.pipelineParams)},i.$$.update=()=>{var C,L;i.$$.dirty&1&&t(2,a=(C=Object.values(n))==null?void 0:C.filter(w=>(w==null?void 0:w.hide)==!0&&(w==null?void 0:w.disabled)!==!0)),i.$$.dirty&1&&t(1,r=(L=Object.values(n))==null?void 0:L.filter(w=>(w==null?void 0:w.hide)!==!0))},[n,r,a,s,o,l,c,b,_,p,u,h,A,O]}class Xn extends Z{constructor(e){super(),ee(this,e,qn,jn,K,{pipelineParams:0})}}function Jn(i){let e,t;return{c(){e=Le("svg"),t=Le("path"),this.h()},l(a){e=Ie(a,"svg",{xmlns:!0,height:!0,viewBox:!0,class:!0});var r=T(e);t=Ie(r,"path",{fill:!0,d:!0}),T(t).forEach(P),r.forEach(P),this.h()},h(){v(t,"fill","currentColor"),v(t,"d","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"height","1em"),v(e,"viewBox","0 0 512 512"),v(e,"class",i[0])},m(a,r){N(a,e,r),E(e,t)},p(a,[r]){r&1&&v(e,"class",a[0])},i:z,o:z,d(a){a&&P(e)}}}function Wn(i,e,t){let{classList:a}=e;return i.$$set=r=>{"classList"in r&&t(0,a=r.classList)},[a]}class Yn extends Z{constructor(e){super(),ee(this,e,Wn,Jn,K,{classList:0})}}function St(i){let e,t,a,r,s,n,o;return{c(){e=I("div"),t=I("div"),a=W(i[0]),r=H(),s=I("div"),this.h()},l(l){e=R(l,"DIV",{class:!0});var c=T(e);t=R(c,"DIV",{class:!0});var b=T(t);a=Y(b,i[0]),b.forEach(P),r=U(c),s=R(c,"DIV",{class:!0,style:!0}),T(s).forEach(P),c.forEach(P),this.h()},h(){v(t,"class","rounded bg-red-800 p-4 text-white"),v(s,"class","bar transition-all duration-500"),qt(s,"width","0"),v(e,"class","fixed right-0 top-0 m-4 cursor-pointer")},m(l,c){N(l,e,c),E(e,t),E(t,a),E(e,r),E(e,s),n||(o=ie(e,"click",i[2]),n=!0)},p(l,c){c&1&&ge(a,l[0])},d(l){l&&P(e),n=!1,o()}}}function Qn(i){let e,t=i[0]&&St(i);return{c(){t&&t.c(),e=re()},l(a){t&&t.l(a),e=re()},m(a,r){t&&t.m(a,r),N(a,e,r)},p(a,[r]){a[0]?t?t.p(a,r):(t=St(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:z,o:z,d(a){a&&P(e),t&&t.d(a)}}}function Kn(i,e,t){let{message:a=""}=e,r=0;const s=()=>t(0,a="");return i.$$set=n=>{"message"in n&&t(0,a=n.message)},i.$$.update=()=>{i.$$.dirty&3&&a!==""&&(console.log("message",a),clearTimeout(r),t(1,r=setTimeout(()=>{t(0,a="")},5e3)))},[a,r,s]}class Zn extends Z{constructor(e){super(),ee(this,e,Kn,Qn,K,{message:0})}}function bt(i){let e,t;return{c(){e=new Jt(!1),t=re(),this.h()},l(a){e=Wt(a,!1),t=re(),this.h()},h(){e.a=t},m(a,r){e.m(i[1],a,r),N(a,t,r)},p(a,r){r&2&&e.p(a[1])},d(a){a&&(P(t),e.d())}}}function Pt(i){let e,t,a,r,s,n,o,l,c="Duplicate",b;return{c(){e=I("p"),t=W("There are "),a=I("span"),r=W(i[4]),s=W(`
        user(s) sharing the same GPU, affecting real-time performance. Maximum queue size is `),n=W(i[3]),o=W(`.
        `),l=I("a"),l.textContent=c,b=W(" and run it on your own GPU."),this.h()},l(_){e=R(_,"P",{class:!0});var p=T(e);t=Y(p,"There are "),a=R(p,"SPAN",{id:!0,class:!0});var u=T(a);r=Y(u,i[4]),u.forEach(P),s=Y(p,`
        user(s) sharing the same GPU, affecting real-time performance. Maximum queue size is `),n=Y(p,i[3]),o=Y(p,`.
        `),l=R(p,"A",{href:!0,target:!0,class:!0,"data-svelte-h":!0}),be(l)!=="svelte-10aq8mu"&&(l.textContent=c),b=Y(p," and run it on your own GPU."),p.forEach(P),this.h()},h(){v(a,"id","queue_size"),v(a,"class","font-bold"),v(l,"href","https://huggingface.co/spaces/radames/Real-Time-Latent-Consistency-Model?duplicate=true"),v(l,"target","_blank"),v(l,"class","text-blue-500 underline hover:no-underline"),v(e,"class","text-sm")},m(_,p){N(_,e,p),E(e,t),E(e,a),E(a,r),E(e,s),E(e,n),E(e,o),E(e,l),E(e,b)},p(_,p){p&16&&ge(r,_[4]),p&8&&ge(n,_[3])},d(_){_&&P(e)}}}function ei(i){let e,t,a,r,s="Loading...",n;return t=new Yn({props:{classList:"animate-spin opacity-50"}}),{c(){e=I("div"),j(t.$$.fragment),a=H(),r=I("p"),r.textContent=s,this.h()},l(o){e=R(o,"DIV",{class:!0});var l=T(e);q(t.$$.fragment,l),a=U(l),r=R(l,"P",{"data-svelte-h":!0}),be(r)!=="svelte-qdsr2u"&&(r.textContent=s),l.forEach(P),this.h()},h(){v(e,"class","flex items-center justify-center gap-3 py-48 text-2xl")},m(o,l){N(o,e,l),X(t,e,null),E(e,a),E(e,r),n=!0},p:z,i(o){n||(D(t.$$.fragment,o),n=!0)},o(o){M(t.$$.fragment,o),n=!1},d(o){o&&P(e),J(t)}}}function ti(i){let e,t,a,r,s,n,o,l,c,b,_,p=i[2]&&Ct(i);return r=new mn({}),l=new Ke({props:{disabled:i[6],classList:"text-lg my-1 p-2",$$slots:{default:[ai]},$$scope:{ctx:i}}}),l.$on("click",i[8]),b=new Xn({props:{pipelineParams:i[0]}}),{c(){e=I("article"),p&&p.c(),t=H(),a=I("div"),j(r.$$.fragment),n=H(),o=I("div"),j(l.$$.fragment),c=H(),j(b.$$.fragment),this.h()},l(u){e=R(u,"ARTICLE",{class:!0});var h=T(e);p&&p.l(h),t=U(h),a=R(h,"DIV",{class:!0});var A=T(a);q(r.$$.fragment,A),A.forEach(P),n=U(h),o=R(h,"DIV",{class:!0});var O=T(o);q(l.$$.fragment,O),c=U(O),q(b.$$.fragment,O),O.forEach(P),h.forEach(P),this.h()},h(){v(a,"class",s=i[2]?"sm:col-start-2":"col-span-2"),v(o,"class","sm:col-span-2"),v(e,"class","my-3 grid grid-cols-1 gap-3 sm:grid-cols-2")},m(u,h){N(u,e,h),p&&p.m(e,null),E(e,t),E(e,a),X(r,a,null),E(e,n),E(e,o),X(l,o,null),E(o,c),X(b,o,null),_=!0},p(u,h){u[2]?p?(p.p(u,h),h&4&&D(p,1)):(p=Ct(u),p.c(),D(p,1),p.m(e,t)):p&&(me(),M(p,1,1,()=>{p=null}),de()),(!_||h&4&&s!==(s=u[2]?"sm:col-start-2":"col-span-2"))&&v(a,"class",s);const A={};h&64&&(A.disabled=u[6]),h&524416&&(A.$$scope={dirty:h,ctx:u}),l.$set(A);const O={};h&1&&(O.pipelineParams=u[0]),b.$set(O)},i(u){_||(D(p),D(r.$$.fragment,u),D(l.$$.fragment,u),D(b.$$.fragment,u),_=!0)},o(u){M(p),M(r.$$.fragment,u),M(l.$$.fragment,u),M(b.$$.fragment,u),_=!1},d(u){u&&P(e),p&&p.d(),J(r),J(l),J(b)}}}function Ct(i){let e,t,a;return t=new Cn({props:{width:Number(i[0].width.default),height:Number(i[0].height.default)}}),{c(){e=I("div"),j(t.$$.fragment),this.h()},l(r){e=R(r,"DIV",{class:!0});var s=T(e);q(t.$$.fragment,s),s.forEach(P),this.h()},h(){v(e,"class","sm:col-start-1")},m(r,s){N(r,e,s),X(t,e,null),a=!0},p(r,s){const n={};s&1&&(n.width=Number(r[0].width.default)),s&1&&(n.height=Number(r[0].height.default)),t.$set(n)},i(r){a||(D(t.$$.fragment,r),a=!0)},o(r){M(t.$$.fragment,r),a=!1},d(r){r&&P(e),J(t)}}}function ni(i){let e;return{c(){e=W("Start")},l(t){e=Y(t,"Start")},m(t,a){N(t,e,a)},d(t){t&&P(e)}}}function ii(i){let e;return{c(){e=W("Stop")},l(t){e=Y(t,"Stop")},m(t,a){N(t,e,a)},d(t){t&&P(e)}}}function ai(i){let e;function t(s,n){return s[7]?ii:ni}let a=t(i),r=a(i);return{c(){r.c(),e=re()},l(s){r.l(s),e=re()},m(s,n){r.m(s,n),N(s,e,n)},p(s,n){a!==(a=t(s))&&(r.d(1),r=a(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&P(e),r.d(s)}}}function ri(i){let e,t="",a,r,s,n,o,l,c,b,_,p,u,h;function A(f){i[10](f)}let O={};i[5]!==void 0&&(O.message=i[5]),n=new Zn({props:O}),te.push(()=>oe(n,"message",A));let C=i[1]&&bt(i),L=i[3]>0&&Pt(i);const w=[ti,ei],F=[];function m(f,d){return f[0]?0:1}return p=m(i),u=F[p]=w[p](i),{c(){e=I("script"),e.innerHTML=t,r=H(),s=I("main"),j(n.$$.fragment),l=H(),c=I("article"),C&&C.c(),b=H(),L&&L.c(),_=H(),u.c(),this.h()},l(f){const d=Xt("svelte-c3fyjj",document.head);e=R(d,"SCRIPT",{src:!0,"data-svelte-h":!0}),be(e)!=="svelte-1oi43ze"&&(e.innerHTML=t),d.forEach(P),r=U(f),s=R(f,"MAIN",{class:!0});var y=T(s);q(n.$$.fragment,y),l=U(y),c=R(y,"ARTICLE",{class:!0});var S=T(c);C&&C.l(S),b=U(S),L&&L.l(S),S.forEach(P),_=U(y),u.l(y),y.forEach(P),this.h()},h(){Ue(e.src,a="https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/4.3.9/iframeResizer.contentWindow.min.js")||v(e,"src",a),v(c,"class","text-center"),v(s,"class","container mx-auto flex max-w-5xl flex-col gap-3 px-4 py-4")},m(f,d){E(document.head,e),N(f,r,d),N(f,s,d),X(n,s,null),E(s,l),E(s,c),C&&C.m(c,null),E(c,b),L&&L.m(c,null),E(s,_),F[p].m(s,null),h=!0},p(f,[d]){const y={};!o&&d&32&&(o=!0,y.message=f[5],se(()=>o=!1)),n.$set(y),f[1]?C?C.p(f,d):(C=bt(f),C.c(),C.m(c,b)):C&&(C.d(1),C=null),f[3]>0?L?L.p(f,d):(L=Pt(f),L.c(),L.m(c,null)):L&&(L.d(1),L=null);let S=p;p=m(f),p===S?F[p].p(f,d):(me(),M(F[S],1,1,()=>{F[S]=null}),de(),u=F[p],u?u.p(f,d):(u=F[p]=w[p](f),u.c()),D(u,1),u.m(s,null))},i(f){h||(D(n.$$.fragment,f),D(u),h=!0)},o(f){M(n.$$.fragment,f),M(u),h=!1},d(f){f&&(P(r),P(s)),P(e),J(n),C&&C.d(),L&&L.d(),F[p].d()}}}function li(i,e,t){let a,r,s,n;ue(i,fe,f=>t(9,r=f)),ue(i,Zt,f=>t(13,s=f)),ue(i,At,f=>t(14,n=f));let o,l,c,b=!1,_=0,p=0,u=!1,h="";ye(()=>{A()});async function A(){const f=await fetch("/api/settings").then(d=>d.json());t(0,o=f.input_params.properties),l=f.info.properties,t(2,b=l.input_mode.default===It.IMAGE),t(3,_=f.max_queue_size),t(1,c=f.page_content),console.log(o),O(!0)}function O(f){u=f&&_>0,f&&C()}async function C(){if(!u)return;const f=await fetch("/api/queue").then(d=>d.json());t(4,p=f.queue_size),setTimeout(C,1e4)}function L(){return b?[Oe(),n==null?void 0:n.blob]:[s]}let w=!1;async function F(){try{a?(b&&Be.stop(),lt.stop(),O(!0)):(b&&(await Be.enumerateDevices(),await Be.start()),t(6,w=!0),await lt.start(L),t(6,w=!1),O(!1))}catch(f){t(5,h=f instanceof Error?f.message:""),t(6,w=!1),O(!0)}}function m(f){h=f,t(5,h),t(9,r)}return i.$$.update=()=>{i.$$.dirty&512&&t(7,a=r!==je.DISCONNECTED),i.$$.dirty&512&&r===je.TIMEOUT&&t(5,h="Session timed out. Please try again.")},[o,c,b,_,p,h,w,a,F,r,m]}class ui extends Z{constructor(e){super(),ee(this,e,li,ri,K,{})}}export{ui as component,fi as universal};
